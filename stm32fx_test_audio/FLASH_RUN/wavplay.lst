   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 4
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"wavplay.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.wav_i2s_dma_tx_callback,"ax",%progbits
  20              		.align	1
  21              		.global	wav_i2s_dma_tx_callback
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	wav_i2s_dma_tx_callback:
  27              	.LFB132:
  28              		.file 1 "source\\audio\\wavplay.c"
   1:source\audio/wavplay.c **** /********************************************************************************/
   2:source\audio/wavplay.c **** /* wavplay.c                                                                    */
   3:source\audio/wavplay.c **** /* STM32F407ZGT6                                                                */
   4:source\audio/wavplay.c **** /* (Lee ChangWoo HL2IRW  hl2irw@daum.net 010-8573-6860)                 	*/
   5:source\audio/wavplay.c **** /* stm32f4x_test								*/
   6:source\audio/wavplay.c **** /********************************************************************************/
   7:source\audio/wavplay.c **** #include "../../hwdefs.h"
   8:source\audio/wavplay.c **** #include "../prototype.h"
   9:source\audio/wavplay.c **** #include <string.h>
  10:source\audio/wavplay.c **** 
  11:source\audio/wavplay.c **** 
  12:source\audio/wavplay.c **** __wavctrl wavctrl;
  13:source\audio/wavplay.c **** volatile unsigned char wavtransferend = 0;
  14:source\audio/wavplay.c **** volatile unsigned char wavwitchbuf = 0;
  15:source\audio/wavplay.c **** unsigned int fillnum;
  16:source\audio/wavplay.c **** 
  17:source\audio/wavplay.c **** extern volatile unsigned char ms_delay;
  18:source\audio/wavplay.c **** extern volatile unsigned char volume;
  19:source\audio/wavplay.c **** extern volatile unsigned char audio_delay,audio_read_flag,audio_run,audio_pause,music_play;
  20:source\audio/wavplay.c **** extern unsigned int audio_old_sec;
  21:source\audio/wavplay.c **** 
  22:source\audio/wavplay.c **** 
  23:source\audio/wavplay.c **** 
  24:source\audio/wavplay.c **** unsigned char wav_decode_init (unsigned char *fname,__wavctrl *wavx)
  25:source\audio/wavplay.c **** {
  26:source\audio/wavplay.c ****       FIL *ftemp;
  27:source\audio/wavplay.c ****       unsigned char *buf;
  28:source\audio/wavplay.c ****       unsigned int br = 0;
  29:source\audio/wavplay.c ****       unsigned char res = 0;
  30:source\audio/wavplay.c ****       ChunkRIFF *riff;
  31:source\audio/wavplay.c ****       ChunkFMT *fmt;
  32:source\audio/wavplay.c ****       ChunkFACT *fact;
  33:source\audio/wavplay.c ****       ChunkDATA *data;
  34:source\audio/wavplay.c ****       ftemp = (FIL *)malloc(sizeof(FIL));
  35:source\audio/wavplay.c ****       buf = malloc(512);
  36:source\audio/wavplay.c ****       if (ftemp && buf) {
  37:source\audio/wavplay.c **** 	 res = f_open(ftemp,(TCHAR *)fname,FA_READ);
  38:source\audio/wavplay.c **** 	 if (res == FR_OK) {
  39:source\audio/wavplay.c **** 	    f_read(ftemp,buf,512,&br);
  40:source\audio/wavplay.c **** 	    riff = (ChunkRIFF *)buf;
  41:source\audio/wavplay.c **** 	    if (riff->Format == 0x45564157) {
  42:source\audio/wavplay.c **** 	       fmt = (ChunkFMT *)(buf + 12);
  43:source\audio/wavplay.c **** 	       fact = (ChunkFACT *)(buf + 12 + 8 + fmt->ChunkSize);
  44:source\audio/wavplay.c **** 	       if (fact->ChunkID == 0x74636166 || fact->ChunkID == 0x5453494C) wavx->datastart = 12 + 8 + 
  45:source\audio/wavplay.c **** 	       data = (ChunkDATA *)(buf + wavx->datastart);
  46:source\audio/wavplay.c **** 	       if (data->ChunkID == 0x61746164) {
  47:source\audio/wavplay.c **** 		  wavx->audioformat = fmt->AudioFormat;
  48:source\audio/wavplay.c **** 		  wavx->nchannels = fmt->NumOfChannels;
  49:source\audio/wavplay.c **** 		  wavx->samplerate = fmt->SampleRate;
  50:source\audio/wavplay.c **** 		  wavx->bitrate = fmt->ByteRate * 8;
  51:source\audio/wavplay.c **** 		  wavx->blockalign = fmt->BlockAlign;
  52:source\audio/wavplay.c **** 		  wavx->bps = fmt->BitsPerSample;
  53:source\audio/wavplay.c **** 		  wavx->datasize = data->ChunkSize;
  54:source\audio/wavplay.c **** 		  wavx->datastart = wavx->datastart + 8;
  55:source\audio/wavplay.c ****       	          lcd_printf(0,20,"File: %s ",fname);
  56:source\audio/wavplay.c **** 		  lcd_printf(0,21,"Audioformat: %d Nchannels: %d",wavx->audioformat,wavx->nchannels);
  57:source\audio/wavplay.c **** 		  lcd_printf(0,22,"Samplerate: %d ",wavx->samplerate);
  58:source\audio/wavplay.c **** 		  lcd_printf(0,23,"Bitrate: %d ",wavx->bitrate);
  59:source\audio/wavplay.c **** 		  lcd_printf(0,24,"Blockalign: %d ",wavx->blockalign);
  60:source\audio/wavplay.c **** 		  lcd_printf(0,25,"Bps: %d ",wavx->bps);
  61:source\audio/wavplay.c **** 		  lcd_printf(0,26,"Datasize: %d ",wavx->datasize);
  62:source\audio/wavplay.c **** 		  lcd_printf(0,27,"Datastart: %d ",wavx->datastart);
  63:source\audio/wavplay.c ****                   lcd_printf(0,28,"Time: %2d:%.2d ",wavx->datasize / (wavx->bitrate / 8));
  64:source\audio/wavplay.c ****                   lcd_printf(20,28,"Volume: %2d ",volume);
  65:source\audio/wavplay.c ****                } else res = 3;
  66:source\audio/wavplay.c **** 	    } else res = 2;
  67:source\audio/wavplay.c **** 	 } else res = 1;
  68:source\audio/wavplay.c ****       }
  69:source\audio/wavplay.c ****       f_close(ftemp);
  70:source\audio/wavplay.c ****       free(ftemp);
  71:source\audio/wavplay.c ****       free(buf);
  72:source\audio/wavplay.c ****       return 0;
  73:source\audio/wavplay.c **** }
  74:source\audio/wavplay.c **** 
  75:source\audio/wavplay.c **** 
  76:source\audio/wavplay.c **** unsigned int wav_buffill (unsigned char *buf,unsigned short size,unsigned char bits)
  77:source\audio/wavplay.c **** {
  78:source\audio/wavplay.c ****       unsigned short readlen = 0;
  79:source\audio/wavplay.c ****       unsigned int bread;
  80:source\audio/wavplay.c ****       unsigned short i;
  81:source\audio/wavplay.c ****       unsigned char *p;
  82:source\audio/wavplay.c ****       if (bits == 24) {
  83:source\audio/wavplay.c **** 	 readlen = (size / 4) * 3;
  84:source\audio/wavplay.c **** 	 f_read(audiodev.file,audiodev.tbuf,readlen,(UINT *)&bread);
  85:source\audio/wavplay.c **** 	 p = audiodev.tbuf;
  86:source\audio/wavplay.c **** 	 for (i=0;i<size;) {
  87:source\audio/wavplay.c **** 	     buf[i++] = p[1];
  88:source\audio/wavplay.c **** 	     buf[i] = p[2];
  89:source\audio/wavplay.c **** 	     i += 2;
  90:source\audio/wavplay.c **** 	     buf[i++] = p[0];
  91:source\audio/wavplay.c **** 	     p += 3;
  92:source\audio/wavplay.c **** 	 }
  93:source\audio/wavplay.c **** 	 bread = (bread * 4) / 3;
  94:source\audio/wavplay.c ****       } else {
  95:source\audio/wavplay.c **** 	 f_read(audiodev.file,buf,size,(UINT *)&bread);
  96:source\audio/wavplay.c **** 	 if (bread < size) {
  97:source\audio/wavplay.c **** 	    for (i=bread;i<size-bread;i++)buf[i] = 0;
  98:source\audio/wavplay.c **** 	 }
  99:source\audio/wavplay.c ****       }
 100:source\audio/wavplay.c ****       return bread;
 101:source\audio/wavplay.c **** }
 102:source\audio/wavplay.c **** 
 103:source\audio/wavplay.c **** 
 104:source\audio/wavplay.c **** void wav_i2s_dma_tx_callback (void)
 105:source\audio/wavplay.c **** {
  29              		.loc 1 105 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
 106:source\audio/wavplay.c ****       unsigned short i;
  34              		.loc 1 106 7 view .LVU1
 107:source\audio/wavplay.c ****       if (DMA1_Stream4->CR & (1 << 19)) {
  35              		.loc 1 107 7 view .LVU2
  36              		.loc 1 107 23 is_stmt 0 view .LVU3
  37 0000 124B     		ldr	r3, .L8
  38 0002 1349     		ldr	r1, .L8+4
  39 0004 1B6F     		ldr	r3, [r3, #112]
  40 0006 134A     		ldr	r2, .L8+8
  41              		.loc 1 107 10 view .LVU4
  42 0008 13F40023 		ands	r3, r3, #524288
  43 000c 10D0     		beq	.L2
 108:source\audio/wavplay.c **** 	 wavwitchbuf = 0;
  44              		.loc 1 108 3 is_stmt 1 view .LVU5
  45              		.loc 1 108 15 is_stmt 0 view .LVU6
  46 000e 0023     		movs	r3, #0
  47 0010 0B70     		strb	r3, [r1]
 109:source\audio/wavplay.c **** 	 if ((audiodev.status & 0x01) == 0) {
  48              		.loc 1 109 3 is_stmt 1 view .LVU7
  49              		.loc 1 109 16 is_stmt 0 view .LVU8
  50 0012 137D     		ldrb	r3, [r2, #20]	@ zero_extendqisi2
  51              		.loc 1 109 6 view .LVU9
  52 0014 13F00103 		ands	r3, r3, #1
  53 0018 06D1     		bne	.L3
 110:source\audio/wavplay.c **** 	    for (i=0;i<WAV_I2S_TX_DMA_BUFSIZE;i++) {
 111:source\audio/wavplay.c **** 		audiodev.i2sbuf1[i] = 0;
  54              		.loc 1 111 23 view .LVU10
  55 001a 1846     		mov	r0, r3
  56              	.L4:
  57              	.LVL0:
  58              		.loc 1 111 3 is_stmt 1 discriminator 3 view .LVU11
  59              		.loc 1 111 11 is_stmt 0 discriminator 3 view .LVU12
  60 001c 1168     		ldr	r1, [r2]	@ unaligned
  61              		.loc 1 111 23 discriminator 3 view .LVU13
  62 001e C854     		strb	r0, [r1, r3]
 110:source\audio/wavplay.c **** 	    for (i=0;i<WAV_I2S_TX_DMA_BUFSIZE;i++) {
  63              		.loc 1 110 40 is_stmt 1 discriminator 3 view .LVU14
  64              	.LVL1:
 110:source\audio/wavplay.c **** 	    for (i=0;i<WAV_I2S_TX_DMA_BUFSIZE;i++) {
  65              		.loc 1 110 15 discriminator 3 view .LVU15
 110:source\audio/wavplay.c **** 	    for (i=0;i<WAV_I2S_TX_DMA_BUFSIZE;i++) {
  66              		.loc 1 110 6 is_stmt 0 discriminator 3 view .LVU16
  67 0020 0133     		adds	r3, r3, #1
  68              	.LVL2:
 110:source\audio/wavplay.c **** 	    for (i=0;i<WAV_I2S_TX_DMA_BUFSIZE;i++) {
  69              		.loc 1 110 6 discriminator 3 view .LVU17
  70 0022 B3F5705F 		cmp	r3, #15360
  71 0026 F9D1     		bne	.L4
  72              	.L3:
 112:source\audio/wavplay.c **** 	    }
 113:source\audio/wavplay.c **** 	 }
 114:source\audio/wavplay.c ****       } else {
 115:source\audio/wavplay.c **** 	 wavwitchbuf = 1;
 116:source\audio/wavplay.c **** 	 if ((audiodev.status & 0x01) == 0) {
 117:source\audio/wavplay.c **** 	    for (i=0;i<WAV_I2S_TX_DMA_BUFSIZE;i++) {
 118:source\audio/wavplay.c **** 		audiodev.i2sbuf2[i] = 0;
 119:source\audio/wavplay.c **** 	    }
 120:source\audio/wavplay.c **** 	 }
 121:source\audio/wavplay.c ****       }
 122:source\audio/wavplay.c ****       wavtransferend = 1;
  73              		.loc 1 122 7 is_stmt 1 view .LVU18
  74              		.loc 1 122 22 is_stmt 0 view .LVU19
  75 0028 0B4B     		ldr	r3, .L8+12
  76 002a 0122     		movs	r2, #1
  77 002c 1A70     		strb	r2, [r3]
 123:source\audio/wavplay.c **** }
  78              		.loc 1 123 1 view .LVU20
  79 002e 7047     		bx	lr
  80              	.L2:
 115:source\audio/wavplay.c **** 	 if ((audiodev.status & 0x01) == 0) {
  81              		.loc 1 115 3 is_stmt 1 view .LVU21
 115:source\audio/wavplay.c **** 	 if ((audiodev.status & 0x01) == 0) {
  82              		.loc 1 115 15 is_stmt 0 view .LVU22
  83 0030 0120     		movs	r0, #1
  84 0032 0870     		strb	r0, [r1]
 116:source\audio/wavplay.c **** 	    for (i=0;i<WAV_I2S_TX_DMA_BUFSIZE;i++) {
  85              		.loc 1 116 3 is_stmt 1 view .LVU23
 116:source\audio/wavplay.c **** 	    for (i=0;i<WAV_I2S_TX_DMA_BUFSIZE;i++) {
  86              		.loc 1 116 16 is_stmt 0 view .LVU24
  87 0034 117D     		ldrb	r1, [r2, #20]	@ zero_extendqisi2
 116:source\audio/wavplay.c **** 	    for (i=0;i<WAV_I2S_TX_DMA_BUFSIZE;i++) {
  88              		.loc 1 116 6 view .LVU25
  89 0036 C907     		lsls	r1, r1, #31
  90 0038 F6D4     		bmi	.L3
 118:source\audio/wavplay.c **** 	    }
  91              		.loc 1 118 23 view .LVU26
  92 003a 1846     		mov	r0, r3
  93              	.L5:
  94              	.LVL3:
 118:source\audio/wavplay.c **** 	    }
  95              		.loc 1 118 3 is_stmt 1 discriminator 3 view .LVU27
 118:source\audio/wavplay.c **** 	    }
  96              		.loc 1 118 11 is_stmt 0 discriminator 3 view .LVU28
  97 003c 5168     		ldr	r1, [r2, #4]	@ unaligned
 118:source\audio/wavplay.c **** 	    }
  98              		.loc 1 118 23 discriminator 3 view .LVU29
  99 003e C854     		strb	r0, [r1, r3]
 117:source\audio/wavplay.c **** 		audiodev.i2sbuf2[i] = 0;
 100              		.loc 1 117 40 is_stmt 1 discriminator 3 view .LVU30
 101              	.LVL4:
 117:source\audio/wavplay.c **** 		audiodev.i2sbuf2[i] = 0;
 102              		.loc 1 117 15 discriminator 3 view .LVU31
 117:source\audio/wavplay.c **** 		audiodev.i2sbuf2[i] = 0;
 103              		.loc 1 117 6 is_stmt 0 discriminator 3 view .LVU32
 104 0040 0133     		adds	r3, r3, #1
 105              	.LVL5:
 117:source\audio/wavplay.c **** 		audiodev.i2sbuf2[i] = 0;
 106              		.loc 1 117 6 discriminator 3 view .LVU33
 107 0042 B3F5705F 		cmp	r3, #15360
 108 0046 F9D1     		bne	.L5
 109 0048 EEE7     		b	.L3
 110              	.L9:
 111 004a 00BF     		.align	2
 112              	.L8:
 113 004c 00600240 		.word	1073897472
 114 0050 00000000 		.word	.LANCHOR0
 115 0054 00000000 		.word	audiodev
 116 0058 00000000 		.word	.LANCHOR1
 117              		.cfi_endproc
 118              	.LFE132:
 120              		.section	.text.wav_file_seek,"ax",%progbits
 121              		.align	1
 122              		.global	wav_file_seek
 123              		.syntax unified
 124              		.thumb
 125              		.thumb_func
 127              	wav_file_seek:
 128              	.LVL6:
 129              	.LFB134:
 124:source\audio/wavplay.c **** 
 125:source\audio/wavplay.c **** 
 126:source\audio/wavplay.c **** void wav_get_curtime (FIL *fx,__wavctrl *wavx)
 127:source\audio/wavplay.c **** {
 128:source\audio/wavplay.c ****       long long fpos;
 129:source\audio/wavplay.c ****       wavx->totsec = wavx->datasize / (wavx->bitrate / 8);
 130:source\audio/wavplay.c ****       fpos = fx->fptr-wavx->datastart;
 131:source\audio/wavplay.c ****       wavx->cursec = fpos * wavx->totsec / wavx->datasize;
 132:source\audio/wavplay.c **** }
 133:source\audio/wavplay.c **** 
 134:source\audio/wavplay.c **** 
 135:source\audio/wavplay.c **** unsigned int wav_file_seek (unsigned int pos)
 136:source\audio/wavplay.c **** {
 130              		.loc 1 136 1 is_stmt 1 view -0
 131              		.cfi_startproc
 132              		@ args = 0, pretend = 0, frame = 0
 133              		@ frame_needed = 0, uses_anonymous_args = 0
 137:source\audio/wavplay.c ****       unsigned char temp;
 134              		.loc 1 137 7 view .LVU35
 138:source\audio/wavplay.c ****       if (pos > audiodev.file->fsize) {
 135              		.loc 1 138 7 view .LVU36
 136:source\audio/wavplay.c ****       unsigned char temp;
 136              		.loc 1 136 1 is_stmt 0 view .LVU37
 137 0000 38B5     		push	{r3, r4, r5, lr}
 138              		.cfi_def_cfa_offset 16
 139              		.cfi_offset 3, -16
 140              		.cfi_offset 4, -12
 141              		.cfi_offset 5, -8
 142              		.cfi_offset 14, -4
 143              		.loc 1 138 25 view .LVU38
 144 0002 104C     		ldr	r4, .L17
 139:source\audio/wavplay.c **** 	 pos = audiodev.file->fsize;
 140:source\audio/wavplay.c ****       }
 141:source\audio/wavplay.c ****       if (pos < wavctrl.datastart) pos = wavctrl.datastart;
 145              		.loc 1 141 24 view .LVU39
 146 0004 104A     		ldr	r2, .L17+4
 136:source\audio/wavplay.c ****       unsigned char temp;
 147              		.loc 1 136 1 view .LVU40
 148 0006 0146     		mov	r1, r0
 138:source\audio/wavplay.c **** 	 pos = audiodev.file->fsize;
 149              		.loc 1 138 25 view .LVU41
 150 0008 E068     		ldr	r0, [r4, #12]	@ unaligned
 151              	.LVL7:
 138:source\audio/wavplay.c **** 	 pos = audiodev.file->fsize;
 152              		.loc 1 138 25 view .LVU42
 153 000a D0F80C32 		ldr	r3, [r0, #524]
 154 000e 9942     		cmp	r1, r3
 155 0010 28BF     		it	cs
 156 0012 1946     		movcs	r1, r3
 157              	.LVL8:
 158              		.loc 1 141 7 is_stmt 1 view .LVU43
 159              		.loc 1 141 24 is_stmt 0 view .LVU44
 160 0014 D369     		ldr	r3, [r2, #28]	@ unaligned
 142:source\audio/wavplay.c ****       if (wavctrl.bps == 16) temp = 8;
 143:source\audio/wavplay.c ****       if (wavctrl.bps == 24) temp = 12;
 161              		.loc 1 143 10 view .LVU45
 162 0016 528B     		ldrh	r2, [r2, #26]	@ unaligned
 163 0018 9942     		cmp	r1, r3
 164 001a 38BF     		it	cc
 165 001c 1946     		movcc	r1, r3
 166              	.LVL9:
 142:source\audio/wavplay.c ****       if (wavctrl.bps == 16) temp = 8;
 167              		.loc 1 142 7 is_stmt 1 view .LVU46
 168              		.loc 1 143 7 view .LVU47
 169              		.loc 1 143 35 is_stmt 0 view .LVU48
 170 001e 182A     		cmp	r2, #24
 171 0020 14BF     		ite	ne
 172 0022 0822     		movne	r2, #8
 173 0024 0C22     		moveq	r2, #12
 174              	.LVL10:
 144:source\audio/wavplay.c ****       if ((pos - wavctrl.datastart) % temp) {
 175              		.loc 1 144 7 is_stmt 1 view .LVU49
 176              		.loc 1 144 16 is_stmt 0 view .LVU50
 177 0026 CB1A     		subs	r3, r1, r3
 178              		.loc 1 144 37 view .LVU51
 179 0028 B3FBF2F5 		udiv	r5, r3, r2
 180 002c 02FB1533 		mls	r3, r2, r5, r3
 181              		.loc 1 144 10 view .LVU52
 182 0030 0BB1     		cbz	r3, .L12
 145:source\audio/wavplay.c **** 	 pos += temp - (pos - wavctrl.datastart) % temp;
 183              		.loc 1 145 3 is_stmt 1 view .LVU53
 184 0032 1144     		add	r1, r1, r2
 185              	.LVL11:
 186              		.loc 1 145 7 is_stmt 0 view .LVU54
 187 0034 C91A     		subs	r1, r1, r3
 188              	.LVL12:
 189              	.L12:
 146:source\audio/wavplay.c ****       }
 147:source\audio/wavplay.c ****       f_lseek(audiodev.file,pos);
 190              		.loc 1 147 7 is_stmt 1 view .LVU55
 191 0036 FFF7FEFF 		bl	f_lseek
 192              	.LVL13:
 148:source\audio/wavplay.c ****       return audiodev.file->fptr;
 193              		.loc 1 148 7 view .LVU56
 194              		.loc 1 148 22 is_stmt 0 view .LVU57
 195 003a E368     		ldr	r3, [r4, #12]	@ unaligned
 149:source\audio/wavplay.c **** }
 196              		.loc 1 149 1 view .LVU58
 197 003c D3F80802 		ldr	r0, [r3, #520]
 198 0040 38BD     		pop	{r3, r4, r5, pc}
 199              	.L18:
 200 0042 00BF     		.align	2
 201              	.L17:
 202 0044 00000000 		.word	audiodev
 203 0048 00000000 		.word	.LANCHOR2
 204              		.cfi_endproc
 205              	.LFE134:
 207              		.section	.rodata.wav_decode_init.str1.1,"aMS",%progbits,1
 208              	.LC0:
 209 0000 46696C65 		.ascii	"File: %s \000"
 209      3A202573 
 209      2000
 210              	.LC1:
 211 000a 41756469 		.ascii	"Audioformat: %d Nchannels: %d\000"
 211      6F666F72 
 211      6D61743A 
 211      20256420 
 211      4E636861 
 212              	.LC2:
 213 0028 53616D70 		.ascii	"Samplerate: %d \000"
 213      6C657261 
 213      74653A20 
 213      25642000 
 214              	.LC3:
 215 0038 42697472 		.ascii	"Bitrate: %d \000"
 215      6174653A 
 215      20256420 
 215      00
 216              	.LC4:
 217 0045 426C6F63 		.ascii	"Blockalign: %d \000"
 217      6B616C69 
 217      676E3A20 
 217      25642000 
 218              	.LC5:
 219 0055 4270733A 		.ascii	"Bps: %d \000"
 219      20256420 
 219      00
 220              	.LC6:
 221 005e 44617461 		.ascii	"Datasize: %d \000"
 221      73697A65 
 221      3A202564 
 221      2000
 222              	.LC7:
 223 006c 44617461 		.ascii	"Datastart: %d \000"
 223      73746172 
 223      743A2025 
 223      642000
 224              	.LC8:
 225 007b 54696D65 		.ascii	"Time: %2d:%.2d \000"
 225      3A202532 
 225      643A252E 
 225      32642000 
 226              	.LC9:
 227 008b 566F6C75 		.ascii	"Volume: %2d \000"
 227      6D653A20 
 227      25326420 
 227      00
 228              		.section	.text.wav_decode_init,"ax",%progbits
 229              		.align	1
 230              		.global	wav_decode_init
 231              		.syntax unified
 232              		.thumb
 233              		.thumb_func
 235              	wav_decode_init:
 236              	.LVL14:
 237              	.LFB130:
  25:source\audio/wavplay.c ****       FIL *ftemp;
 238              		.loc 1 25 1 is_stmt 1 view -0
 239              		.cfi_startproc
 240              		@ args = 0, pretend = 0, frame = 8
 241              		@ frame_needed = 0, uses_anonymous_args = 0
  26:source\audio/wavplay.c ****       unsigned char *buf;
 242              		.loc 1 26 7 view .LVU60
  27:source\audio/wavplay.c ****       unsigned int br = 0;
 243              		.loc 1 27 7 view .LVU61
  28:source\audio/wavplay.c ****       unsigned char res = 0;
 244              		.loc 1 28 7 view .LVU62
  25:source\audio/wavplay.c ****       FIL *ftemp;
 245              		.loc 1 25 1 is_stmt 0 view .LVU63
 246 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 247              		.cfi_def_cfa_offset 20
 248              		.cfi_offset 4, -20
 249              		.cfi_offset 5, -16
 250              		.cfi_offset 6, -12
 251              		.cfi_offset 7, -8
 252              		.cfi_offset 14, -4
 253 0002 85B0     		sub	sp, sp, #20
 254              		.cfi_def_cfa_offset 40
  28:source\audio/wavplay.c ****       unsigned char res = 0;
 255              		.loc 1 28 20 view .LVU64
 256 0004 0023     		movs	r3, #0
  25:source\audio/wavplay.c ****       FIL *ftemp;
 257              		.loc 1 25 1 view .LVU65
 258 0006 0746     		mov	r7, r0
  34:source\audio/wavplay.c ****       buf = malloc(512);
 259              		.loc 1 34 22 view .LVU66
 260 0008 4FF40B70 		mov	r0, #556
 261              	.LVL15:
  25:source\audio/wavplay.c ****       FIL *ftemp;
 262              		.loc 1 25 1 view .LVU67
 263 000c 0C46     		mov	r4, r1
  28:source\audio/wavplay.c ****       unsigned char res = 0;
 264              		.loc 1 28 20 view .LVU68
 265 000e 0393     		str	r3, [sp, #12]
  29:source\audio/wavplay.c ****       ChunkRIFF *riff;
 266              		.loc 1 29 7 is_stmt 1 view .LVU69
 267              	.LVL16:
  30:source\audio/wavplay.c ****       ChunkFMT *fmt;
 268              		.loc 1 30 7 view .LVU70
  31:source\audio/wavplay.c ****       ChunkFACT *fact;
 269              		.loc 1 31 7 view .LVU71
  32:source\audio/wavplay.c ****       ChunkDATA *data;
 270              		.loc 1 32 7 view .LVU72
  33:source\audio/wavplay.c ****       ftemp = (FIL *)malloc(sizeof(FIL));
 271              		.loc 1 33 7 view .LVU73
  34:source\audio/wavplay.c ****       buf = malloc(512);
 272              		.loc 1 34 7 view .LVU74
  34:source\audio/wavplay.c ****       buf = malloc(512);
 273              		.loc 1 34 22 is_stmt 0 view .LVU75
 274 0010 FFF7FEFF 		bl	malloc
 275              	.LVL17:
  34:source\audio/wavplay.c ****       buf = malloc(512);
 276              		.loc 1 34 22 view .LVU76
 277 0014 0646     		mov	r6, r0
 278              	.LVL18:
  35:source\audio/wavplay.c ****       if (ftemp && buf) {
 279              		.loc 1 35 7 is_stmt 1 view .LVU77
  35:source\audio/wavplay.c ****       if (ftemp && buf) {
 280              		.loc 1 35 13 is_stmt 0 view .LVU78
 281 0016 4FF40070 		mov	r0, #512
 282              	.LVL19:
  35:source\audio/wavplay.c ****       if (ftemp && buf) {
 283              		.loc 1 35 13 view .LVU79
 284 001a FFF7FEFF 		bl	malloc
 285              	.LVL20:
 286 001e 0546     		mov	r5, r0
 287              	.LVL21:
  36:source\audio/wavplay.c **** 	 res = f_open(ftemp,(TCHAR *)fname,FA_READ);
 288              		.loc 1 36 7 is_stmt 1 view .LVU80
  36:source\audio/wavplay.c **** 	 res = f_open(ftemp,(TCHAR *)fname,FA_READ);
 289              		.loc 1 36 10 is_stmt 0 view .LVU81
 290 0020 002E     		cmp	r6, #0
 291 0022 00F08880 		beq	.L21
  36:source\audio/wavplay.c **** 	 res = f_open(ftemp,(TCHAR *)fname,FA_READ);
 292              		.loc 1 36 17 discriminator 1 view .LVU82
 293 0026 0028     		cmp	r0, #0
 294 0028 00F08580 		beq	.L21
  37:source\audio/wavplay.c **** 	 if (res == FR_OK) {
 295              		.loc 1 37 3 is_stmt 1 view .LVU83
  37:source\audio/wavplay.c **** 	 if (res == FR_OK) {
 296              		.loc 1 37 9 is_stmt 0 view .LVU84
 297 002c 0122     		movs	r2, #1
 298 002e 3946     		mov	r1, r7
 299 0030 3046     		mov	r0, r6
 300              	.LVL22:
  37:source\audio/wavplay.c **** 	 if (res == FR_OK) {
 301              		.loc 1 37 9 view .LVU85
 302 0032 FFF7FEFF 		bl	f_open
 303              	.LVL23:
  38:source\audio/wavplay.c **** 	    f_read(ftemp,buf,512,&br);
 304              		.loc 1 38 3 is_stmt 1 view .LVU86
  38:source\audio/wavplay.c **** 	    f_read(ftemp,buf,512,&br);
 305              		.loc 1 38 6 is_stmt 0 view .LVU87
 306 0036 0028     		cmp	r0, #0
 307 0038 7DD1     		bne	.L21
  39:source\audio/wavplay.c **** 	    riff = (ChunkRIFF *)buf;
 308              		.loc 1 39 6 is_stmt 1 view .LVU88
 309 003a 03AB     		add	r3, sp, #12
 310 003c 4FF40072 		mov	r2, #512
 311 0040 2946     		mov	r1, r5
 312 0042 3046     		mov	r0, r6
 313              	.LVL24:
  39:source\audio/wavplay.c **** 	    riff = (ChunkRIFF *)buf;
 314              		.loc 1 39 6 is_stmt 0 view .LVU89
 315 0044 FFF7FEFF 		bl	f_read
 316              	.LVL25:
  40:source\audio/wavplay.c **** 	    if (riff->Format == 0x45564157) {
 317              		.loc 1 40 6 is_stmt 1 view .LVU90
  41:source\audio/wavplay.c **** 	       fmt = (ChunkFMT *)(buf + 12);
 318              		.loc 1 41 6 view .LVU91
  41:source\audio/wavplay.c **** 	       fmt = (ChunkFMT *)(buf + 12);
 319              		.loc 1 41 9 is_stmt 0 view .LVU92
 320 0048 AA68     		ldr	r2, [r5, #8]
 321 004a 414B     		ldr	r3, .L28
 322 004c 9A42     		cmp	r2, r3
 323 004e 72D1     		bne	.L21
  42:source\audio/wavplay.c **** 	       fact = (ChunkFACT *)(buf + 12 + 8 + fmt->ChunkSize);
 324              		.loc 1 42 9 is_stmt 1 view .LVU93
 325              	.LVL26:
  43:source\audio/wavplay.c **** 	       if (fact->ChunkID == 0x74636166 || fact->ChunkID == 0x5453494C) wavx->datastart = 12 + 8 + 
 326              		.loc 1 43 9 view .LVU94
  43:source\audio/wavplay.c **** 	       if (fact->ChunkID == 0x74636166 || fact->ChunkID == 0x5453494C) wavx->datastart = 12 + 8 + 
 327              		.loc 1 43 48 is_stmt 0 view .LVU95
 328 0050 2B69     		ldr	r3, [r5, #16]
  44:source\audio/wavplay.c **** 	       data = (ChunkDATA *)(buf + wavx->datastart);
 329              		.loc 1 44 12 view .LVU96
 330 0052 DFF830C1 		ldr	ip, .L28+52
  43:source\audio/wavplay.c **** 	       if (fact->ChunkID == 0x74636166 || fact->ChunkID == 0x5453494C) wavx->datastart = 12 + 8 + 
 331              		.loc 1 43 43 view .LVU97
 332 0056 03F11402 		add	r2, r3, #20
  43:source\audio/wavplay.c **** 	       if (fact->ChunkID == 0x74636166 || fact->ChunkID == 0x5453494C) wavx->datastart = 12 + 8 + 
 333              		.loc 1 43 14 view .LVU98
 334 005a A818     		adds	r0, r5, r2
 335              	.LVL27:
  44:source\audio/wavplay.c **** 	       data = (ChunkDATA *)(buf + wavx->datastart);
 336              		.loc 1 44 9 is_stmt 1 view .LVU99
  44:source\audio/wavplay.c **** 	       data = (ChunkDATA *)(buf + wavx->datastart);
 337              		.loc 1 44 17 is_stmt 0 view .LVU100
 338 005c A958     		ldr	r1, [r5, r2]	@ unaligned
  44:source\audio/wavplay.c **** 	       data = (ChunkDATA *)(buf + wavx->datastart);
 339              		.loc 1 44 12 view .LVU101
 340 005e 6145     		cmp	r1, ip
 341 0060 03D0     		beq	.L23
  44:source\audio/wavplay.c **** 	       data = (ChunkDATA *)(buf + wavx->datastart);
 342              		.loc 1 44 41 discriminator 2 view .LVU102
 343 0062 DFF824C1 		ldr	ip, .L28+56
 344 0066 6145     		cmp	r1, ip
 345 0068 02D1     		bne	.L24
 346              	.L23:
  44:source\audio/wavplay.c **** 	       data = (ChunkDATA *)(buf + wavx->datastart);
 347              		.loc 1 44 73 is_stmt 1 discriminator 3 view .LVU103
  44:source\audio/wavplay.c **** 	       data = (ChunkDATA *)(buf + wavx->datastart);
 348              		.loc 1 44 125 is_stmt 0 discriminator 3 view .LVU104
 349 006a 4268     		ldr	r2, [r0, #4]	@ unaligned
  44:source\audio/wavplay.c **** 	       data = (ChunkDATA *)(buf + wavx->datastart);
 350              		.loc 1 44 119 discriminator 3 view .LVU105
 351 006c 1C33     		adds	r3, r3, #28
 352 006e 1A44     		add	r2, r2, r3
 353              	.L24:
  46:source\audio/wavplay.c **** 		  wavx->audioformat = fmt->AudioFormat;
 354              		.loc 1 46 17 view .LVU106
 355 0070 A858     		ldr	r0, [r5, r2]	@ unaligned
 356              	.LVL28:
  46:source\audio/wavplay.c **** 		  wavx->audioformat = fmt->AudioFormat;
 357              		.loc 1 46 12 view .LVU107
 358 0072 384B     		ldr	r3, .L28+4
 359 0074 E261     		str	r2, [r4, #28]	@ unaligned
  45:source\audio/wavplay.c **** 	       if (data->ChunkID == 0x61746164) {
 360              		.loc 1 45 9 is_stmt 1 view .LVU108
  46:source\audio/wavplay.c **** 		  wavx->audioformat = fmt->AudioFormat;
 361              		.loc 1 46 12 is_stmt 0 view .LVU109
 362 0076 9842     		cmp	r0, r3
  45:source\audio/wavplay.c **** 	       if (data->ChunkID == 0x61746164) {
 363              		.loc 1 45 14 view .LVU110
 364 0078 05EB0201 		add	r1, r5, r2
 365              	.LVL29:
  46:source\audio/wavplay.c **** 		  wavx->audioformat = fmt->AudioFormat;
 366              		.loc 1 46 9 is_stmt 1 view .LVU111
  46:source\audio/wavplay.c **** 		  wavx->audioformat = fmt->AudioFormat;
 367              		.loc 1 46 12 is_stmt 0 view .LVU112
 368 007c 5BD1     		bne	.L21
  47:source\audio/wavplay.c **** 		  wavx->nchannels = fmt->NumOfChannels;
 369              		.loc 1 47 5 is_stmt 1 view .LVU113
  47:source\audio/wavplay.c **** 		  wavx->nchannels = fmt->NumOfChannels;
 370              		.loc 1 47 23 is_stmt 0 view .LVU114
 371 007e AB8A     		ldrh	r3, [r5, #20]
 372 0080 2380     		strh	r3, [r4]	@ unaligned
  48:source\audio/wavplay.c **** 		  wavx->samplerate = fmt->SampleRate;
 373              		.loc 1 48 5 is_stmt 1 view .LVU115
  48:source\audio/wavplay.c **** 		  wavx->samplerate = fmt->SampleRate;
 374              		.loc 1 48 21 is_stmt 0 view .LVU116
 375 0082 EB8A     		ldrh	r3, [r5, #22]
 376 0084 6380     		strh	r3, [r4, #2]	@ unaligned
  49:source\audio/wavplay.c **** 		  wavx->bitrate = fmt->ByteRate * 8;
 377              		.loc 1 49 5 is_stmt 1 view .LVU117
  49:source\audio/wavplay.c **** 		  wavx->bitrate = fmt->ByteRate * 8;
 378              		.loc 1 49 22 is_stmt 0 view .LVU118
 379 0086 AB69     		ldr	r3, [r5, #24]
 380 0088 C4F81630 		str	r3, [r4, #22]	@ unaligned
  50:source\audio/wavplay.c **** 		  wavx->blockalign = fmt->BlockAlign;
 381              		.loc 1 50 5 is_stmt 1 view .LVU119
  50:source\audio/wavplay.c **** 		  wavx->blockalign = fmt->BlockAlign;
 382              		.loc 1 50 35 is_stmt 0 view .LVU120
 383 008c EB69     		ldr	r3, [r5, #28]
 384 008e DB00     		lsls	r3, r3, #3
  50:source\audio/wavplay.c **** 		  wavx->blockalign = fmt->BlockAlign;
 385              		.loc 1 50 19 view .LVU121
 386 0090 C4F81230 		str	r3, [r4, #18]	@ unaligned
  51:source\audio/wavplay.c **** 		  wavx->bps = fmt->BitsPerSample;
 387              		.loc 1 51 5 is_stmt 1 view .LVU122
  51:source\audio/wavplay.c **** 		  wavx->bps = fmt->BitsPerSample;
 388              		.loc 1 51 22 is_stmt 0 view .LVU123
 389 0094 2B8C     		ldrh	r3, [r5, #32]
 390 0096 A380     		strh	r3, [r4, #4]	@ unaligned
  52:source\audio/wavplay.c **** 		  wavx->datasize = data->ChunkSize;
 391              		.loc 1 52 5 is_stmt 1 view .LVU124
  52:source\audio/wavplay.c **** 		  wavx->datasize = data->ChunkSize;
 392              		.loc 1 52 15 is_stmt 0 view .LVU125
 393 0098 6B8C     		ldrh	r3, [r5, #34]
 394 009a 6383     		strh	r3, [r4, #26]	@ unaligned
  53:source\audio/wavplay.c **** 		  wavx->datastart = wavx->datastart + 8;
 395              		.loc 1 53 5 is_stmt 1 view .LVU126
  53:source\audio/wavplay.c **** 		  wavx->datastart = wavx->datastart + 8;
 396              		.loc 1 53 26 is_stmt 0 view .LVU127
 397 009c 4B68     		ldr	r3, [r1, #4]	@ unaligned
  53:source\audio/wavplay.c **** 		  wavx->datastart = wavx->datastart + 8;
 398              		.loc 1 53 20 view .LVU128
 399 009e C4F80630 		str	r3, [r4, #6]	@ unaligned
  54:source\audio/wavplay.c ****       	          lcd_printf(0,20,"File: %s ",fname);
 400              		.loc 1 54 5 is_stmt 1 view .LVU129
  54:source\audio/wavplay.c ****       	          lcd_printf(0,20,"File: %s ",fname);
 401              		.loc 1 54 39 is_stmt 0 view .LVU130
 402 00a2 0832     		adds	r2, r2, #8
  54:source\audio/wavplay.c ****       	          lcd_printf(0,20,"File: %s ",fname);
 403              		.loc 1 54 21 view .LVU131
 404 00a4 E261     		str	r2, [r4, #28]	@ unaligned
  55:source\audio/wavplay.c **** 		  lcd_printf(0,21,"Audioformat: %d Nchannels: %d",wavx->audioformat,wavx->nchannels);
 405              		.loc 1 55 18 is_stmt 1 view .LVU132
 406 00a6 3B46     		mov	r3, r7
 407 00a8 2B4A     		ldr	r2, .L28+8
 408 00aa 1421     		movs	r1, #20
 409              	.LVL30:
  55:source\audio/wavplay.c **** 		  lcd_printf(0,21,"Audioformat: %d Nchannels: %d",wavx->audioformat,wavx->nchannels);
 410              		.loc 1 55 18 is_stmt 0 view .LVU133
 411 00ac 0020     		movs	r0, #0
 412 00ae FFF7FEFF 		bl	lcd_printf
 413              	.LVL31:
  56:source\audio/wavplay.c **** 		  lcd_printf(0,22,"Samplerate: %d ",wavx->samplerate);
 414              		.loc 1 56 5 is_stmt 1 view .LVU134
 415 00b2 6388     		ldrh	r3, [r4, #2]	@ unaligned
 416 00b4 294A     		ldr	r2, .L28+12
 417 00b6 0093     		str	r3, [sp]
 418 00b8 1521     		movs	r1, #21
 419 00ba 2388     		ldrh	r3, [r4]	@ unaligned
 420 00bc 0020     		movs	r0, #0
 421 00be FFF7FEFF 		bl	lcd_printf
 422              	.LVL32:
  57:source\audio/wavplay.c **** 		  lcd_printf(0,23,"Bitrate: %d ",wavx->bitrate);
 423              		.loc 1 57 5 view .LVU135
 424 00c2 D4F81630 		ldr	r3, [r4, #22]	@ unaligned
 425 00c6 264A     		ldr	r2, .L28+16
 426 00c8 1621     		movs	r1, #22
 427 00ca 0020     		movs	r0, #0
 428 00cc FFF7FEFF 		bl	lcd_printf
 429              	.LVL33:
  58:source\audio/wavplay.c **** 		  lcd_printf(0,24,"Blockalign: %d ",wavx->blockalign);
 430              		.loc 1 58 5 view .LVU136
 431 00d0 D4F81230 		ldr	r3, [r4, #18]	@ unaligned
 432 00d4 234A     		ldr	r2, .L28+20
 433 00d6 1721     		movs	r1, #23
 434 00d8 0020     		movs	r0, #0
 435 00da FFF7FEFF 		bl	lcd_printf
 436              	.LVL34:
  59:source\audio/wavplay.c **** 		  lcd_printf(0,25,"Bps: %d ",wavx->bps);
 437              		.loc 1 59 5 view .LVU137
 438 00de A388     		ldrh	r3, [r4, #4]	@ unaligned
 439 00e0 214A     		ldr	r2, .L28+24
 440 00e2 1821     		movs	r1, #24
 441 00e4 0020     		movs	r0, #0
 442 00e6 FFF7FEFF 		bl	lcd_printf
 443              	.LVL35:
  60:source\audio/wavplay.c **** 		  lcd_printf(0,26,"Datasize: %d ",wavx->datasize);
 444              		.loc 1 60 5 view .LVU138
 445 00ea 638B     		ldrh	r3, [r4, #26]	@ unaligned
 446 00ec 1F4A     		ldr	r2, .L28+28
 447 00ee 1921     		movs	r1, #25
 448 00f0 0020     		movs	r0, #0
 449 00f2 FFF7FEFF 		bl	lcd_printf
 450              	.LVL36:
  61:source\audio/wavplay.c **** 		  lcd_printf(0,27,"Datastart: %d ",wavx->datastart);
 451              		.loc 1 61 5 view .LVU139
 452 00f6 D4F80630 		ldr	r3, [r4, #6]	@ unaligned
 453 00fa 1D4A     		ldr	r2, .L28+32
 454 00fc 1A21     		movs	r1, #26
 455 00fe 0020     		movs	r0, #0
 456 0100 FFF7FEFF 		bl	lcd_printf
 457              	.LVL37:
  62:source\audio/wavplay.c ****                   lcd_printf(0,28,"Time: %2d:%.2d ",wavx->datasize / (wavx->bitrate / 8));
 458              		.loc 1 62 5 view .LVU140
 459 0104 E369     		ldr	r3, [r4, #28]	@ unaligned
 460 0106 1B4A     		ldr	r2, .L28+36
 461 0108 1B21     		movs	r1, #27
 462 010a 0020     		movs	r0, #0
 463 010c FFF7FEFF 		bl	lcd_printf
 464              	.LVL38:
  63:source\audio/wavplay.c ****                   lcd_printf(20,28,"Volume: %2d ",volume);
 465              		.loc 1 63 19 view .LVU141
  63:source\audio/wavplay.c ****                   lcd_printf(20,28,"Volume: %2d ",volume);
 466              		.loc 1 63 75 is_stmt 0 view .LVU142
 467 0110 D4F81230 		ldr	r3, [r4, #18]	@ unaligned
  63:source\audio/wavplay.c ****                   lcd_printf(20,28,"Volume: %2d ",volume);
 468              		.loc 1 63 57 view .LVU143
 469 0114 D4F80620 		ldr	r2, [r4, #6]	@ unaligned
  63:source\audio/wavplay.c ****                   lcd_printf(20,28,"Volume: %2d ",volume);
 470              		.loc 1 63 19 view .LVU144
 471 0118 1C21     		movs	r1, #28
 472 011a 0020     		movs	r0, #0
  63:source\audio/wavplay.c ****                   lcd_printf(20,28,"Volume: %2d ",volume);
 473              		.loc 1 63 85 view .LVU145
 474 011c DB08     		lsrs	r3, r3, #3
  63:source\audio/wavplay.c ****                   lcd_printf(20,28,"Volume: %2d ",volume);
 475              		.loc 1 63 19 view .LVU146
 476 011e B2FBF3F3 		udiv	r3, r2, r3
 477 0122 154A     		ldr	r2, .L28+40
 478 0124 FFF7FEFF 		bl	lcd_printf
 479              	.LVL39:
  64:source\audio/wavplay.c ****                } else res = 3;
 480              		.loc 1 64 19 is_stmt 1 view .LVU147
 481 0128 144B     		ldr	r3, .L28+44
 482 012a 154A     		ldr	r2, .L28+48
 483 012c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 484 012e 1C21     		movs	r1, #28
 485 0130 1420     		movs	r0, #20
 486 0132 FFF7FEFF 		bl	lcd_printf
 487              	.LVL40:
 488              	.L21:
  69:source\audio/wavplay.c ****       free(ftemp);
 489              		.loc 1 69 7 view .LVU148
 490 0136 3046     		mov	r0, r6
 491 0138 FFF7FEFF 		bl	f_close
 492              	.LVL41:
  70:source\audio/wavplay.c ****       free(buf);
 493              		.loc 1 70 7 view .LVU149
 494 013c 3046     		mov	r0, r6
 495 013e FFF7FEFF 		bl	free
 496              	.LVL42:
  71:source\audio/wavplay.c ****       return 0;
 497              		.loc 1 71 7 view .LVU150
 498 0142 2846     		mov	r0, r5
 499 0144 FFF7FEFF 		bl	free
 500              	.LVL43:
  72:source\audio/wavplay.c **** }
 501              		.loc 1 72 7 view .LVU151
  73:source\audio/wavplay.c **** 
 502              		.loc 1 73 1 is_stmt 0 view .LVU152
 503 0148 0020     		movs	r0, #0
 504 014a 05B0     		add	sp, sp, #20
 505              		.cfi_def_cfa_offset 20
 506              		@ sp needed
 507 014c F0BD     		pop	{r4, r5, r6, r7, pc}
 508              	.LVL44:
 509              	.L29:
  73:source\audio/wavplay.c **** 
 510              		.loc 1 73 1 view .LVU153
 511 014e 00BF     		.align	2
 512              	.L28:
 513 0150 57415645 		.word	1163280727
 514 0154 64617461 		.word	1635017060
 515 0158 00000000 		.word	.LC0
 516 015c 0A000000 		.word	.LC1
 517 0160 28000000 		.word	.LC2
 518 0164 38000000 		.word	.LC3
 519 0168 45000000 		.word	.LC4
 520 016c 55000000 		.word	.LC5
 521 0170 5E000000 		.word	.LC6
 522 0174 6C000000 		.word	.LC7
 523 0178 7B000000 		.word	.LC8
 524 017c 00000000 		.word	volume
 525 0180 8B000000 		.word	.LC9
 526 0184 66616374 		.word	1952670054
 527 0188 4C495354 		.word	1414744396
 528              		.cfi_endproc
 529              	.LFE130:
 531              		.section	.text.wav_buffill,"ax",%progbits
 532              		.align	1
 533              		.global	wav_buffill
 534              		.syntax unified
 535              		.thumb
 536              		.thumb_func
 538              	wav_buffill:
 539              	.LVL45:
 540              	.LFB131:
  77:source\audio/wavplay.c ****       unsigned short readlen = 0;
 541              		.loc 1 77 1 is_stmt 1 view -0
 542              		.cfi_startproc
 543              		@ args = 0, pretend = 0, frame = 8
 544              		@ frame_needed = 0, uses_anonymous_args = 0
  78:source\audio/wavplay.c ****       unsigned int bread;
 545              		.loc 1 78 7 view .LVU155
  79:source\audio/wavplay.c ****       unsigned short i;
 546              		.loc 1 79 7 view .LVU156
  80:source\audio/wavplay.c ****       unsigned char *p;
 547              		.loc 1 80 7 view .LVU157
  81:source\audio/wavplay.c ****       if (bits == 24) {
 548              		.loc 1 81 7 view .LVU158
  82:source\audio/wavplay.c **** 	 readlen = (size / 4) * 3;
 549              		.loc 1 82 7 view .LVU159
  77:source\audio/wavplay.c ****       unsigned short readlen = 0;
 550              		.loc 1 77 1 is_stmt 0 view .LVU160
 551 0000 73B5     		push	{r0, r1, r4, r5, r6, lr}
 552              		.cfi_def_cfa_offset 24
 553              		.cfi_offset 4, -16
 554              		.cfi_offset 5, -12
 555              		.cfi_offset 6, -8
 556              		.cfi_offset 14, -4
 557              	.LBB4:
 558              	.LBB5:
  84:source\audio/wavplay.c **** 	 p = audiodev.tbuf;
 559              		.loc 1 84 3 view .LVU161
 560 0002 1E4E     		ldr	r6, .L39
 561              	.LBE5:
 562              	.LBE4:
  82:source\audio/wavplay.c **** 	 readlen = (size / 4) * 3;
 563              		.loc 1 82 10 view .LVU162
 564 0004 182A     		cmp	r2, #24
  77:source\audio/wavplay.c ****       unsigned short readlen = 0;
 565              		.loc 1 77 1 view .LVU163
 566 0006 0546     		mov	r5, r0
 567 0008 0C46     		mov	r4, r1
 568              	.LBB9:
 569              	.LBB6:
  84:source\audio/wavplay.c **** 	 p = audiodev.tbuf;
 570              		.loc 1 84 3 view .LVU164
 571 000a F068     		ldr	r0, [r6, #12]	@ unaligned
 572              	.LVL46:
  84:source\audio/wavplay.c **** 	 p = audiodev.tbuf;
 573              		.loc 1 84 3 view .LVU165
 574              	.LBE6:
 575              	.LBE9:
  82:source\audio/wavplay.c **** 	 readlen = (size / 4) * 3;
 576              		.loc 1 82 10 view .LVU166
 577 000c 25D1     		bne	.L31
 578              	.LVL47:
 579              	.LBB10:
 580              	.LBI4:
  76:source\audio/wavplay.c **** {
 581              		.loc 1 76 14 is_stmt 1 view .LVU167
 582              	.LBB7:
  83:source\audio/wavplay.c **** 	 f_read(audiodev.file,audiodev.tbuf,readlen,(UINT *)&bread);
 583              		.loc 1 83 3 view .LVU168
  84:source\audio/wavplay.c **** 	 p = audiodev.tbuf;
 584              		.loc 1 84 3 view .LVU169
  83:source\audio/wavplay.c **** 	 f_read(audiodev.file,audiodev.tbuf,readlen,(UINT *)&bread);
 585              		.loc 1 83 11 is_stmt 0 view .LVU170
 586 000e 8A08     		lsrs	r2, r1, #2
 587              	.LVL48:
  84:source\audio/wavplay.c **** 	 p = audiodev.tbuf;
 588              		.loc 1 84 3 view .LVU171
 589 0010 01AB     		add	r3, sp, #4
 590 0012 02EB4202 		add	r2, r2, r2, lsl #1
 591 0016 B168     		ldr	r1, [r6, #8]	@ unaligned
 592              	.LVL49:
  84:source\audio/wavplay.c **** 	 p = audiodev.tbuf;
 593              		.loc 1 84 3 view .LVU172
 594 0018 FFF7FEFF 		bl	f_read
 595              	.LVL50:
  85:source\audio/wavplay.c **** 	 for (i=0;i<size;) {
 596              		.loc 1 85 3 is_stmt 1 view .LVU173
  86:source\audio/wavplay.c **** 	     buf[i++] = p[1];
 597              		.loc 1 86 3 view .LVU174
  85:source\audio/wavplay.c **** 	 for (i=0;i<size;) {
 598              		.loc 1 85 5 is_stmt 0 view .LVU175
 599 001c B268     		ldr	r2, [r6, #8]	@ unaligned
  86:source\audio/wavplay.c **** 	     buf[i++] = p[1];
 600              		.loc 1 86 9 view .LVU176
 601 001e 0023     		movs	r3, #0
 602              	.LVL51:
 603              	.L32:
  86:source\audio/wavplay.c **** 	     buf[i++] = p[1];
 604              		.loc 1 86 12 is_stmt 1 view .LVU177
  86:source\audio/wavplay.c **** 	     buf[i++] = p[1];
 605              		.loc 1 86 3 is_stmt 0 view .LVU178
 606 0020 9C42     		cmp	r4, r3
 607 0022 02F10302 		add	r2, r2, #3
 608              	.LVL52:
  86:source\audio/wavplay.c **** 	     buf[i++] = p[1];
 609              		.loc 1 86 3 view .LVU179
 610 0026 08D8     		bhi	.L33
  93:source\audio/wavplay.c ****       } else {
 611              		.loc 1 93 3 is_stmt 1 view .LVU180
  93:source\audio/wavplay.c ****       } else {
 612              		.loc 1 93 18 is_stmt 0 view .LVU181
 613 0028 019B     		ldr	r3, [sp, #4]
 614              	.LVL53:
  93:source\audio/wavplay.c ****       } else {
 615              		.loc 1 93 23 view .LVU182
 616 002a 0322     		movs	r2, #3
 617              	.LVL54:
  93:source\audio/wavplay.c ****       } else {
 618              		.loc 1 93 18 view .LVU183
 619 002c 9B00     		lsls	r3, r3, #2
  93:source\audio/wavplay.c ****       } else {
 620              		.loc 1 93 23 view .LVU184
 621 002e B3FBF2F3 		udiv	r3, r3, r2
 100:source\audio/wavplay.c **** }
 622              		.loc 1 100 7 is_stmt 1 view .LVU185
 623              	.LVL55:
 100:source\audio/wavplay.c **** }
 624              		.loc 1 100 7 is_stmt 0 view .LVU186
 625              	.LBE7:
 626              	.LBE10:
 627 0032 0193     		str	r3, [sp, #4]
 628              	.L34:
 100:source\audio/wavplay.c **** }
 629              		.loc 1 100 7 is_stmt 1 view .LVU187
 101:source\audio/wavplay.c **** 
 630              		.loc 1 101 1 is_stmt 0 view .LVU188
 631 0034 0198     		ldr	r0, [sp, #4]
 632 0036 02B0     		add	sp, sp, #8
 633              		.cfi_remember_state
 634              		.cfi_def_cfa_offset 16
 635              		@ sp needed
 636 0038 70BD     		pop	{r4, r5, r6, pc}
 637              	.LVL56:
 638              	.L33:
 639              		.cfi_restore_state
 640              	.LBB11:
 641              	.LBB8:
  87:source\audio/wavplay.c **** 	     buf[i] = p[2];
 642              		.loc 1 87 7 is_stmt 1 view .LVU189
  87:source\audio/wavplay.c **** 	     buf[i] = p[2];
 643              		.loc 1 87 16 is_stmt 0 view .LVU190
 644 003a 12F8021C 		ldrb	r1, [r2, #-2]	@ zero_extendqisi2
 645 003e E954     		strb	r1, [r5, r3]
  88:source\audio/wavplay.c **** 	     i += 2;
 646              		.loc 1 88 7 is_stmt 1 view .LVU191
  87:source\audio/wavplay.c **** 	     buf[i] = p[2];
 647              		.loc 1 87 12 is_stmt 0 view .LVU192
 648 0040 591C     		adds	r1, r3, #1
  88:source\audio/wavplay.c **** 	     i += 2;
 649              		.loc 1 88 10 view .LVU193
 650 0042 89B2     		uxth	r1, r1
  88:source\audio/wavplay.c **** 	     i += 2;
 651              		.loc 1 88 14 view .LVU194
 652 0044 12F8010C 		ldrb	r0, [r2, #-1]	@ zero_extendqisi2
 653 0048 6854     		strb	r0, [r5, r1]
  89:source\audio/wavplay.c **** 	     buf[i++] = p[0];
 654              		.loc 1 89 7 is_stmt 1 view .LVU195
  89:source\audio/wavplay.c **** 	     buf[i++] = p[0];
 655              		.loc 1 89 9 is_stmt 0 view .LVU196
 656 004a D91C     		adds	r1, r3, #3
 657 004c 89B2     		uxth	r1, r1
 658              	.LVL57:
  90:source\audio/wavplay.c **** 	     p += 3;
 659              		.loc 1 90 7 is_stmt 1 view .LVU197
  90:source\audio/wavplay.c **** 	     p += 3;
 660              		.loc 1 90 19 is_stmt 0 view .LVU198
 661 004e 12F8030C 		ldrb	r0, [r2, #-3]	@ zero_extendqisi2
  90:source\audio/wavplay.c **** 	     p += 3;
 662              		.loc 1 90 16 view .LVU199
 663 0052 6854     		strb	r0, [r5, r1]
  90:source\audio/wavplay.c **** 	     p += 3;
 664              		.loc 1 90 12 view .LVU200
 665 0054 0433     		adds	r3, r3, #4
 666 0056 9BB2     		uxth	r3, r3
 667              	.LVL58:
  91:source\audio/wavplay.c **** 	 }
 668              		.loc 1 91 7 is_stmt 1 view .LVU201
  91:source\audio/wavplay.c **** 	 }
 669              		.loc 1 91 7 is_stmt 0 view .LVU202
 670 0058 E2E7     		b	.L32
 671              	.LVL59:
 672              	.L31:
  91:source\audio/wavplay.c **** 	 }
 673              		.loc 1 91 7 view .LVU203
 674              	.LBE8:
 675              	.LBE11:
  95:source\audio/wavplay.c **** 	 if (bread < size) {
 676              		.loc 1 95 3 is_stmt 1 view .LVU204
 677 005a 0A46     		mov	r2, r1
 678              	.LVL60:
  95:source\audio/wavplay.c **** 	 if (bread < size) {
 679              		.loc 1 95 3 is_stmt 0 view .LVU205
 680 005c 01AB     		add	r3, sp, #4
 681 005e 2946     		mov	r1, r5
 682              	.LVL61:
  95:source\audio/wavplay.c **** 	 if (bread < size) {
 683              		.loc 1 95 3 view .LVU206
 684 0060 FFF7FEFF 		bl	f_read
 685              	.LVL62:
  96:source\audio/wavplay.c **** 	    for (i=bread;i<size-bread;i++)buf[i] = 0;
 686              		.loc 1 96 3 is_stmt 1 view .LVU207
  96:source\audio/wavplay.c **** 	    for (i=bread;i<size-bread;i++)buf[i] = 0;
 687              		.loc 1 96 13 is_stmt 0 view .LVU208
 688 0064 0199     		ldr	r1, [sp, #4]
  96:source\audio/wavplay.c **** 	    for (i=bread;i<size-bread;i++)buf[i] = 0;
 689              		.loc 1 96 6 view .LVU209
 690 0066 8C42     		cmp	r4, r1
 691 0068 E4D9     		bls	.L34
  97:source\audio/wavplay.c **** 	 }
 692              		.loc 1 97 6 is_stmt 1 view .LVU210
  97:source\audio/wavplay.c **** 	 }
 693              		.loc 1 97 12 is_stmt 0 view .LVU211
 694 006a 8BB2     		uxth	r3, r1
 695              	.LVL63:
  97:source\audio/wavplay.c **** 	 }
 696              		.loc 1 97 25 view .LVU212
 697 006c 641A     		subs	r4, r4, r1
  97:source\audio/wavplay.c **** 	 }
 698              		.loc 1 97 43 view .LVU213
 699 006e 0022     		movs	r2, #0
 700              	.L36:
  97:source\audio/wavplay.c **** 	 }
 701              		.loc 1 97 19 is_stmt 1 discriminator 1 view .LVU214
  97:source\audio/wavplay.c **** 	 }
 702              		.loc 1 97 6 is_stmt 0 discriminator 1 view .LVU215
 703 0070 A342     		cmp	r3, r4
 704 0072 DFD2     		bcs	.L34
  97:source\audio/wavplay.c **** 	 }
 705              		.loc 1 97 36 is_stmt 1 discriminator 3 view .LVU216
  97:source\audio/wavplay.c **** 	 }
 706              		.loc 1 97 43 is_stmt 0 discriminator 3 view .LVU217
 707 0074 EA54     		strb	r2, [r5, r3]
  97:source\audio/wavplay.c **** 	 }
 708              		.loc 1 97 32 is_stmt 1 discriminator 3 view .LVU218
  97:source\audio/wavplay.c **** 	 }
 709              		.loc 1 97 33 is_stmt 0 discriminator 3 view .LVU219
 710 0076 0133     		adds	r3, r3, #1
 711              	.LVL64:
  97:source\audio/wavplay.c **** 	 }
 712              		.loc 1 97 33 discriminator 3 view .LVU220
 713 0078 9BB2     		uxth	r3, r3
 714              	.LVL65:
  97:source\audio/wavplay.c **** 	 }
 715              		.loc 1 97 33 discriminator 3 view .LVU221
 716 007a F9E7     		b	.L36
 717              	.L40:
 718              		.align	2
 719              	.L39:
 720 007c 00000000 		.word	audiodev
 721              		.cfi_endproc
 722              	.LFE131:
 724              		.global	__aeabi_uldivmod
 725              		.global	__aeabi_ldivmod
 726              		.section	.text.wav_get_curtime,"ax",%progbits
 727              		.align	1
 728              		.global	wav_get_curtime
 729              		.syntax unified
 730              		.thumb
 731              		.thumb_func
 733              	wav_get_curtime:
 734              	.LVL66:
 735              	.LFB133:
 127:source\audio/wavplay.c ****       long long fpos;
 736              		.loc 1 127 1 is_stmt 1 view -0
 737              		.cfi_startproc
 738              		@ args = 0, pretend = 0, frame = 0
 739              		@ frame_needed = 0, uses_anonymous_args = 0
 128:source\audio/wavplay.c ****       wavx->totsec = wavx->datasize / (wavx->bitrate / 8);
 740              		.loc 1 128 7 view .LVU223
 129:source\audio/wavplay.c ****       fpos = fx->fptr-wavx->datastart;
 741              		.loc 1 129 7 view .LVU224
 127:source\audio/wavplay.c ****       long long fpos;
 742              		.loc 1 127 1 is_stmt 0 view .LVU225
 743 0000 10B5     		push	{r4, lr}
 744              		.cfi_def_cfa_offset 8
 745              		.cfi_offset 4, -8
 746              		.cfi_offset 14, -4
 127:source\audio/wavplay.c ****       long long fpos;
 747              		.loc 1 127 1 view .LVU226
 748 0002 0C46     		mov	r4, r1
 130:source\audio/wavplay.c ****       wavx->cursec = fpos * wavx->totsec / wavx->datasize;
 749              		.loc 1 130 22 view .LVU227
 750 0004 D0F80802 		ldr	r0, [r0, #520]
 751              	.LVL67:
 130:source\audio/wavplay.c ****       wavx->cursec = fpos * wavx->totsec / wavx->datasize;
 752              		.loc 1 130 27 view .LVU228
 753 0008 E369     		ldr	r3, [r4, #28]	@ unaligned
 129:source\audio/wavplay.c ****       fpos = fx->fptr-wavx->datastart;
 754              		.loc 1 129 26 view .LVU229
 755 000a D1F80620 		ldr	r2, [r1, #6]	@ unaligned
 129:source\audio/wavplay.c ****       fpos = fx->fptr-wavx->datastart;
 756              		.loc 1 129 44 view .LVU230
 757 000e D1F81210 		ldr	r1, [r1, #18]	@ unaligned
 758              	.LVL68:
 130:source\audio/wavplay.c ****       wavx->cursec = fpos * wavx->totsec / wavx->datasize;
 759              		.loc 1 130 22 view .LVU231
 760 0012 C01A     		subs	r0, r0, r3
 129:source\audio/wavplay.c ****       fpos = fx->fptr-wavx->datastart;
 761              		.loc 1 129 54 view .LVU232
 762 0014 C908     		lsrs	r1, r1, #3
 131:source\audio/wavplay.c **** }
 763              		.loc 1 131 42 view .LVU233
 764 0016 0023     		movs	r3, #0
 129:source\audio/wavplay.c ****       fpos = fx->fptr-wavx->datastart;
 765              		.loc 1 129 37 view .LVU234
 766 0018 B2FBF1F1 		udiv	r1, r2, r1
 129:source\audio/wavplay.c ****       fpos = fx->fptr-wavx->datastart;
 767              		.loc 1 129 20 view .LVU235
 768 001c C4F80A10 		str	r1, [r4, #10]	@ unaligned
 130:source\audio/wavplay.c ****       wavx->cursec = fpos * wavx->totsec / wavx->datasize;
 769              		.loc 1 130 7 is_stmt 1 view .LVU236
 131:source\audio/wavplay.c **** }
 770              		.loc 1 131 7 view .LVU237
 131:source\audio/wavplay.c **** }
 771              		.loc 1 131 42 is_stmt 0 view .LVU238
 772 0020 A0FB0101 		umull	r0, r1, r0, r1
 773 0024 FFF7FEFF 		bl	__aeabi_ldivmod
 774              	.LVL69:
 131:source\audio/wavplay.c **** }
 775              		.loc 1 131 20 view .LVU239
 776 0028 C4F80E00 		str	r0, [r4, #14]	@ unaligned
 132:source\audio/wavplay.c **** 
 777              		.loc 1 132 1 view .LVU240
 778 002c 10BD     		pop	{r4, pc}
 132:source\audio/wavplay.c **** 
 779              		.loc 1 132 1 view .LVU241
 780              		.cfi_endproc
 781              	.LFE133:
 783              		.section	.text.wave_stop,"ax",%progbits
 784              		.align	1
 785              		.global	wave_stop
 786              		.syntax unified
 787              		.thumb
 788              		.thumb_func
 790              	wave_stop:
 791              	.LFB135:
 150:source\audio/wavplay.c **** 
 151:source\audio/wavplay.c **** 
 152:source\audio/wavplay.c **** void wave_stop (void)
 153:source\audio/wavplay.c **** {
 792              		.loc 1 153 1 is_stmt 1 view -0
 793              		.cfi_startproc
 794              		@ args = 0, pretend = 0, frame = 0
 795              		@ frame_needed = 0, uses_anonymous_args = 0
 154:source\audio/wavplay.c ****       audio_stop();
 796              		.loc 1 154 7 view .LVU243
 153:source\audio/wavplay.c ****       audio_stop();
 797              		.loc 1 153 1 is_stmt 0 view .LVU244
 798 0000 10B5     		push	{r4, lr}
 799              		.cfi_def_cfa_offset 8
 800              		.cfi_offset 4, -8
 801              		.cfi_offset 14, -4
 155:source\audio/wavplay.c ****       free(audiodev.tbuf);
 802              		.loc 1 155 20 view .LVU245
 803 0002 0F4C     		ldr	r4, .L43
 154:source\audio/wavplay.c ****       audio_stop();
 804              		.loc 1 154 7 view .LVU246
 805 0004 FFF7FEFF 		bl	audio_stop
 806              	.LVL70:
 807              		.loc 1 155 7 is_stmt 1 view .LVU247
 808 0008 A068     		ldr	r0, [r4, #8]	@ unaligned
 809 000a FFF7FEFF 		bl	free
 810              	.LVL71:
 156:source\audio/wavplay.c ****       free(audiodev.i2sbuf1);
 811              		.loc 1 156 7 view .LVU248
 812 000e 2068     		ldr	r0, [r4]	@ unaligned
 813 0010 FFF7FEFF 		bl	free
 814              	.LVL72:
 157:source\audio/wavplay.c ****       free(audiodev.i2sbuf2);
 815              		.loc 1 157 7 view .LVU249
 816 0014 6068     		ldr	r0, [r4, #4]	@ unaligned
 817 0016 FFF7FEFF 		bl	free
 818              	.LVL73:
 158:source\audio/wavplay.c ****       free(audiodev.file);
 819              		.loc 1 158 7 view .LVU250
 820 001a E068     		ldr	r0, [r4, #12]	@ unaligned
 821 001c FFF7FEFF 		bl	free
 822              	.LVL74:
 159:source\audio/wavplay.c ****       audio_run = 0;
 823              		.loc 1 159 7 view .LVU251
 824              		.loc 1 159 17 is_stmt 0 view .LVU252
 825 0020 084A     		ldr	r2, .L43+4
 826 0022 0023     		movs	r3, #0
 827 0024 1370     		strb	r3, [r2]
 160:source\audio/wavplay.c ****       audio_read_flag = 0;
 828              		.loc 1 160 7 is_stmt 1 view .LVU253
 829              		.loc 1 160 23 is_stmt 0 view .LVU254
 830 0026 084A     		ldr	r2, .L43+8
 831 0028 1370     		strb	r3, [r2]
 161:source\audio/wavplay.c ****       audio_pause = 0;
 832              		.loc 1 161 7 is_stmt 1 view .LVU255
 833              		.loc 1 161 19 is_stmt 0 view .LVU256
 834 002a 084A     		ldr	r2, .L43+12
 835 002c 1370     		strb	r3, [r2]
 162:source\audio/wavplay.c ****       audio_play_function = NULL;
 836              		.loc 1 162 7 is_stmt 1 view .LVU257
 837              		.loc 1 162 27 is_stmt 0 view .LVU258
 838 002e 084A     		ldr	r2, .L43+16
 839 0030 1360     		str	r3, [r2]
 163:source\audio/wavplay.c ****       audio_stop_function = NULL;
 840              		.loc 1 163 7 is_stmt 1 view .LVU259
 841              		.loc 1 163 27 is_stmt 0 view .LVU260
 842 0032 084A     		ldr	r2, .L43+20
 843 0034 1360     		str	r3, [r2]
 164:source\audio/wavplay.c ****       music_play = 1;
 844              		.loc 1 164 7 is_stmt 1 view .LVU261
 845              		.loc 1 164 18 is_stmt 0 view .LVU262
 846 0036 084B     		ldr	r3, .L43+24
 847 0038 0122     		movs	r2, #1
 848 003a 1A70     		strb	r2, [r3]
 165:source\audio/wavplay.c **** }
 849              		.loc 1 165 1 view .LVU263
 850 003c 10BD     		pop	{r4, pc}
 851              	.L44:
 852 003e 00BF     		.align	2
 853              	.L43:
 854 0040 00000000 		.word	audiodev
 855 0044 00000000 		.word	audio_run
 856 0048 00000000 		.word	audio_read_flag
 857 004c 00000000 		.word	audio_pause
 858 0050 00000000 		.word	audio_play_function
 859 0054 00000000 		.word	audio_stop_function
 860 0058 00000000 		.word	music_play
 861              		.cfi_endproc
 862              	.LFE135:
 864              		.section	.text.wav_play_song,"ax",%progbits
 865              		.align	1
 866              		.global	wav_play_song
 867              		.syntax unified
 868              		.thumb
 869              		.thumb_func
 871              	wav_play_song:
 872              	.LVL75:
 873              	.LFB136:
 166:source\audio/wavplay.c **** 
 167:source\audio/wavplay.c **** 
 168:source\audio/wavplay.c **** unsigned char wav_play_song (unsigned char *fname)
 169:source\audio/wavplay.c **** {
 874              		.loc 1 169 1 is_stmt 1 view -0
 875              		.cfi_startproc
 876              		@ args = 0, pretend = 0, frame = 8
 877              		@ frame_needed = 0, uses_anonymous_args = 0
 170:source\audio/wavplay.c ****       unsigned char res;
 878              		.loc 1 170 7 view .LVU265
 171:source\audio/wavplay.c ****       audio_old_sec = -1;
 879              		.loc 1 171 7 view .LVU266
 880              		.loc 1 171 21 is_stmt 0 view .LVU267
 881 0000 414B     		ldr	r3, .L63
 169:source\audio/wavplay.c ****       unsigned char res;
 882              		.loc 1 169 1 view .LVU268
 883 0002 2DE9F341 		push	{r0, r1, r4, r5, r6, r7, r8, lr}
 884              		.cfi_def_cfa_offset 32
 885              		.cfi_offset 4, -24
 886              		.cfi_offset 5, -20
 887              		.cfi_offset 6, -16
 888              		.cfi_offset 7, -12
 889              		.cfi_offset 8, -8
 890              		.cfi_offset 14, -4
 891              		.loc 1 171 21 view .LVU269
 892 0006 4FF0FF32 		mov	r2, #-1
 169:source\audio/wavplay.c ****       unsigned char res;
 893              		.loc 1 169 1 view .LVU270
 894 000a 0646     		mov	r6, r0
 172:source\audio/wavplay.c ****       audiodev.file = (FIL *)malloc(sizeof(FIL));
 895              		.loc 1 172 30 view .LVU271
 896 000c 4FF40B70 		mov	r0, #556
 897              	.LVL76:
 171:source\audio/wavplay.c ****       audio_old_sec = -1;
 898              		.loc 1 171 21 view .LVU272
 899 0010 1A60     		str	r2, [r3]
 900              		.loc 1 172 7 is_stmt 1 view .LVU273
 901              		.loc 1 172 30 is_stmt 0 view .LVU274
 902 0012 FFF7FEFF 		bl	malloc
 903              	.LVL77:
 904              		.loc 1 172 21 view .LVU275
 905 0016 3D4C     		ldr	r4, .L63+4
 906              		.loc 1 172 30 view .LVU276
 907 0018 8046     		mov	r8, r0
 908              		.loc 1 172 21 view .LVU277
 909 001a E060     		str	r0, [r4, #12]	@ unaligned
 173:source\audio/wavplay.c ****       audiodev.i2sbuf1 = malloc(WAV_I2S_TX_DMA_BUFSIZE);
 910              		.loc 1 173 7 is_stmt 1 view .LVU278
 911              		.loc 1 173 26 is_stmt 0 view .LVU279
 912 001c 4FF47050 		mov	r0, #15360
 913 0020 FFF7FEFF 		bl	malloc
 914              	.LVL78:
 915              		.loc 1 173 24 view .LVU280
 916 0024 2060     		str	r0, [r4]	@ unaligned
 174:source\audio/wavplay.c ****       audiodev.i2sbuf2 = malloc(WAV_I2S_TX_DMA_BUFSIZE);
 917              		.loc 1 174 7 is_stmt 1 view .LVU281
 173:source\audio/wavplay.c ****       audiodev.i2sbuf1 = malloc(WAV_I2S_TX_DMA_BUFSIZE);
 918              		.loc 1 173 26 is_stmt 0 view .LVU282
 919 0026 0746     		mov	r7, r0
 920              		.loc 1 174 26 view .LVU283
 921 0028 4FF47050 		mov	r0, #15360
 922 002c FFF7FEFF 		bl	malloc
 923              	.LVL79:
 924              		.loc 1 174 24 view .LVU284
 925 0030 6060     		str	r0, [r4, #4]	@ unaligned
 175:source\audio/wavplay.c ****       audiodev.tbuf = malloc(WAV_I2S_TX_DMA_BUFSIZE);
 926              		.loc 1 175 7 is_stmt 1 view .LVU285
 174:source\audio/wavplay.c ****       audiodev.i2sbuf2 = malloc(WAV_I2S_TX_DMA_BUFSIZE);
 927              		.loc 1 174 26 is_stmt 0 view .LVU286
 928 0032 0546     		mov	r5, r0
 929              		.loc 1 175 23 view .LVU287
 930 0034 4FF47050 		mov	r0, #15360
 931 0038 FFF7FEFF 		bl	malloc
 932              	.LVL80:
 176:source\audio/wavplay.c ****       audiodev.file_seek = wav_file_seek;
 933              		.loc 1 176 26 view .LVU288
 934 003c 344A     		ldr	r2, .L63+8
 175:source\audio/wavplay.c ****       audiodev.tbuf = malloc(WAV_I2S_TX_DMA_BUFSIZE);
 935              		.loc 1 175 21 view .LVU289
 936 003e A060     		str	r0, [r4, #8]	@ unaligned
 937              		.loc 1 176 7 is_stmt 1 view .LVU290
 938              		.loc 1 176 26 is_stmt 0 view .LVU291
 939 0040 2261     		str	r2, [r4, #16]	@ unaligned
 177:source\audio/wavplay.c ****       if (audiodev.file && audiodev.i2sbuf1 && audiodev.i2sbuf2 && audiodev.tbuf) {
 940              		.loc 1 177 7 is_stmt 1 view .LVU292
 941              		.loc 1 177 10 is_stmt 0 view .LVU293
 942 0042 B8F1000F 		cmp	r8, #0
 943 0046 5AD0     		beq	.L46
 944              		.loc 1 177 25 discriminator 1 view .LVU294
 945 0048 002F     		cmp	r7, #0
 946 004a 58D0     		beq	.L46
 947              		.loc 1 177 45 discriminator 2 view .LVU295
 948 004c 002D     		cmp	r5, #0
 949 004e 56D0     		beq	.L46
 950              		.loc 1 177 65 discriminator 3 view .LVU296
 951 0050 0028     		cmp	r0, #0
 952 0052 54D0     		beq	.L46
 178:source\audio/wavplay.c **** 	 res = wav_decode_init(fname,&wavctrl);
 953              		.loc 1 178 3 is_stmt 1 view .LVU297
 954              		.loc 1 178 9 is_stmt 0 view .LVU298
 955 0054 2F4D     		ldr	r5, .L63+12
 956 0056 3046     		mov	r0, r6
 957 0058 2946     		mov	r1, r5
 958 005a FFF7FEFF 		bl	wav_decode_init
 959              	.LVL81:
 179:source\audio/wavplay.c **** 	 if (res == 0) {
 960              		.loc 1 179 3 is_stmt 1 view .LVU299
 961              		.loc 1 179 6 is_stmt 0 view .LVU300
 962 005e 0028     		cmp	r0, #0
 963 0060 4DD1     		bne	.L46
 180:source\audio/wavplay.c **** 	    if (wavctrl.bps == 16) {
 964              		.loc 1 180 6 is_stmt 1 view .LVU301
 965              		.loc 1 180 17 is_stmt 0 view .LVU302
 966 0062 6B8B     		ldrh	r3, [r5, #26]	@ unaligned
 967              		.loc 1 180 9 view .LVU303
 968 0064 102B     		cmp	r3, #16
 969 0066 41D1     		bne	.L47
 181:source\audio/wavplay.c **** 	       WM8978_I2S_Cfg(2,0);
 970              		.loc 1 181 9 is_stmt 1 view .LVU304
 971 0068 0146     		mov	r1, r0
 972 006a 0190     		str	r0, [sp, #4]
 973 006c 0220     		movs	r0, #2
 974              	.LVL82:
 975              		.loc 1 181 9 is_stmt 0 view .LVU305
 976 006e FFF7FEFF 		bl	WM8978_I2S_Cfg
 977              	.LVL83:
 182:source\audio/wavplay.c **** 	       I2S2_Init(I2S_Standard_Phillips,I2S_Mode_MasterTx,I2S_CPOL_Low,I2S_DataFormat_16bextended);
 978              		.loc 1 182 9 is_stmt 1 view .LVU306
 979 0072 0123     		movs	r3, #1
 980              	.L62:
 183:source\audio/wavplay.c **** 	    } else if (wavctrl.bps == 24) {
 184:source\audio/wavplay.c **** 	       WM8978_I2S_Cfg(2,2);
 185:source\audio/wavplay.c **** 	       I2S2_Init(I2S_Standard_Phillips,I2S_Mode_MasterTx,I2S_CPOL_Low,I2S_DataFormat_24b);
 981              		.loc 1 185 9 is_stmt 0 view .LVU307
 982 0074 019A     		ldr	r2, [sp, #4]
 983 0076 4FF40071 		mov	r1, #512
 984 007a 1046     		mov	r0, r2
 985 007c FFF7FEFF 		bl	I2S2_Init
 986              	.LVL84:
 987              	.L48:
 186:source\audio/wavplay.c **** 	    }
 187:source\audio/wavplay.c **** 	    I2S2_SampleRate_Set(wavctrl.samplerate);
 988              		.loc 1 187 6 is_stmt 1 view .LVU308
 989 0080 D5F81600 		ldr	r0, [r5, #22]	@ unaligned
 990 0084 FFF7FEFF 		bl	I2S2_SampleRate_Set
 991              	.LVL85:
 188:source\audio/wavplay.c **** 	    I2S2_TX_DMA_Init(audiodev.i2sbuf1,audiodev.i2sbuf2,WAV_I2S_TX_DMA_BUFSIZE/2);
 992              		.loc 1 188 6 view .LVU309
 993 0088 6168     		ldr	r1, [r4, #4]	@ unaligned
 994 008a 2068     		ldr	r0, [r4]	@ unaligned
 995 008c 4FF4F052 		mov	r2, #7680
 996 0090 FFF7FEFF 		bl	I2S2_TX_DMA_Init
 997              	.LVL86:
 189:source\audio/wavplay.c **** 	    i2s_tx_callback = wav_i2s_dma_tx_callback;
 998              		.loc 1 189 6 view .LVU310
 999              		.loc 1 189 22 is_stmt 0 view .LVU311
 1000 0094 204B     		ldr	r3, .L63+16
 1001 0096 214A     		ldr	r2, .L63+20
 1002 0098 1A60     		str	r2, [r3]
 190:source\audio/wavplay.c **** 	    audio_stop();
 1003              		.loc 1 190 6 is_stmt 1 view .LVU312
 1004 009a FFF7FEFF 		bl	audio_stop
 1005              	.LVL87:
 191:source\audio/wavplay.c **** 	    res = f_open(audiodev.file,(TCHAR *)fname,FA_READ);
 1006              		.loc 1 191 6 view .LVU313
 1007              		.loc 1 191 12 is_stmt 0 view .LVU314
 1008 009e 3146     		mov	r1, r6
 1009 00a0 E068     		ldr	r0, [r4, #12]	@ unaligned
 1010 00a2 0122     		movs	r2, #1
 1011 00a4 FFF7FEFF 		bl	f_open
 1012              	.LVL88:
 192:source\audio/wavplay.c **** 	    if (res == 0) {
 1013              		.loc 1 192 6 is_stmt 1 view .LVU315
 1014              		.loc 1 192 9 is_stmt 0 view .LVU316
 1015 00a8 0646     		mov	r6, r0
 1016              	.LVL89:
 1017              		.loc 1 192 9 view .LVU317
 1018 00aa 40BB     		cbnz	r0, .L46
 193:source\audio/wavplay.c **** 	       f_lseek(audiodev.file, wavctrl.datastart);
 1019              		.loc 1 193 9 is_stmt 1 view .LVU318
 1020 00ac E969     		ldr	r1, [r5, #28]	@ unaligned
 1021 00ae E068     		ldr	r0, [r4, #12]	@ unaligned
 1022              	.LVL90:
 194:source\audio/wavplay.c **** 	       fillnum = wav_buffill(audiodev.i2sbuf1,WAV_I2S_TX_DMA_BUFSIZE,wavctrl.bps);
 1023              		.loc 1 194 17 is_stmt 0 view .LVU319
 1024 00b0 1B4F     		ldr	r7, .L63+24
 193:source\audio/wavplay.c **** 	       f_lseek(audiodev.file, wavctrl.datastart);
 1025              		.loc 1 193 9 view .LVU320
 1026 00b2 FFF7FEFF 		bl	f_lseek
 1027              	.LVL91:
 1028              		.loc 1 194 9 is_stmt 1 view .LVU321
 1029              		.loc 1 194 78 is_stmt 0 view .LVU322
 1030 00b6 6A8B     		ldrh	r2, [r5, #26]	@ unaligned
 1031              		.loc 1 194 19 view .LVU323
 1032 00b8 2068     		ldr	r0, [r4]	@ unaligned
 1033 00ba D2B2     		uxtb	r2, r2
 1034 00bc 4FF47051 		mov	r1, #15360
 1035 00c0 FFF7FEFF 		bl	wav_buffill
 1036              	.LVL92:
 1037              		.loc 1 194 17 view .LVU324
 1038 00c4 3860     		str	r0, [r7]
 195:source\audio/wavplay.c **** 	       fillnum = wav_buffill(audiodev.i2sbuf2,WAV_I2S_TX_DMA_BUFSIZE,wavctrl.bps);
 1039              		.loc 1 195 9 is_stmt 1 view .LVU325
 1040              		.loc 1 195 78 is_stmt 0 view .LVU326
 1041 00c6 6A8B     		ldrh	r2, [r5, #26]	@ unaligned
 1042              		.loc 1 195 19 view .LVU327
 1043 00c8 6068     		ldr	r0, [r4, #4]	@ unaligned
 1044 00ca D2B2     		uxtb	r2, r2
 1045 00cc 4FF47051 		mov	r1, #15360
 1046 00d0 FFF7FEFF 		bl	wav_buffill
 1047              	.LVL93:
 1048              		.loc 1 195 17 view .LVU328
 1049 00d4 3860     		str	r0, [r7]
 196:source\audio/wavplay.c **** 	       audio_start();
 1050              		.loc 1 196 9 is_stmt 1 view .LVU329
 1051 00d6 FFF7FEFF 		bl	audio_start
 1052              	.LVL94:
 197:source\audio/wavplay.c **** 	    } else res = 1;
 198:source\audio/wavplay.c **** 	 } else res = 1;
 199:source\audio/wavplay.c ****       } else res = 1;
 200:source\audio/wavplay.c ****       if (res == 0) {
 1053              		.loc 1 200 7 view .LVU330
 201:source\audio/wavplay.c ****          audio_read_flag = 1;
 1054              		.loc 1 201 10 view .LVU331
 1055              		.loc 1 201 26 is_stmt 0 view .LVU332
 1056 00da 124A     		ldr	r2, .L63+28
 1057 00dc 0123     		movs	r3, #1
 1058 00de 1370     		strb	r3, [r2]
 202:source\audio/wavplay.c ****          audio_run = 1;
 1059              		.loc 1 202 10 is_stmt 1 view .LVU333
 1060              		.loc 1 202 20 is_stmt 0 view .LVU334
 1061 00e0 114A     		ldr	r2, .L63+32
 1062 00e2 1370     		strb	r3, [r2]
 1063              	.LVL95:
 1064              	.L49:
 203:source\audio/wavplay.c ****       } else {
 204:source\audio/wavplay.c ****       	 wave_stop();
 205:source\audio/wavplay.c ****       }
 206:source\audio/wavplay.c ****       return res;
 1065              		.loc 1 206 7 is_stmt 1 view .LVU335
 207:source\audio/wavplay.c **** }
 1066              		.loc 1 207 1 is_stmt 0 view .LVU336
 1067 00e4 3046     		mov	r0, r6
 1068 00e6 02B0     		add	sp, sp, #8
 1069              		.cfi_remember_state
 1070              		.cfi_def_cfa_offset 24
 1071              		@ sp needed
 1072 00e8 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1073              	.LVL96:
 1074              	.L47:
 1075              		.cfi_restore_state
 183:source\audio/wavplay.c **** 	       WM8978_I2S_Cfg(2,2);
 1076              		.loc 1 183 13 is_stmt 1 view .LVU337
 183:source\audio/wavplay.c **** 	       WM8978_I2S_Cfg(2,2);
 1077              		.loc 1 183 16 is_stmt 0 view .LVU338
 1078 00ec 182B     		cmp	r3, #24
 1079 00ee C7D1     		bne	.L48
 184:source\audio/wavplay.c **** 	       I2S2_Init(I2S_Standard_Phillips,I2S_Mode_MasterTx,I2S_CPOL_Low,I2S_DataFormat_24b);
 1080              		.loc 1 184 9 view .LVU339
 1081 00f0 0221     		movs	r1, #2
 1082 00f2 0190     		str	r0, [sp, #4]
 184:source\audio/wavplay.c **** 	       I2S2_Init(I2S_Standard_Phillips,I2S_Mode_MasterTx,I2S_CPOL_Low,I2S_DataFormat_24b);
 1083              		.loc 1 184 9 is_stmt 1 view .LVU340
 1084 00f4 0846     		mov	r0, r1
 1085              	.LVL97:
 184:source\audio/wavplay.c **** 	       I2S2_Init(I2S_Standard_Phillips,I2S_Mode_MasterTx,I2S_CPOL_Low,I2S_DataFormat_24b);
 1086              		.loc 1 184 9 is_stmt 0 view .LVU341
 1087 00f6 FFF7FEFF 		bl	WM8978_I2S_Cfg
 1088              	.LVL98:
 185:source\audio/wavplay.c **** 	    }
 1089              		.loc 1 185 9 is_stmt 1 view .LVU342
 1090 00fa 0323     		movs	r3, #3
 1091 00fc BAE7     		b	.L62
 1092              	.LVL99:
 1093              	.L46:
 204:source\audio/wavplay.c ****       }
 1094              		.loc 1 204 9 view .LVU343
 1095 00fe FFF7FEFF 		bl	wave_stop
 1096              	.LVL100:
 1097 0102 0126     		movs	r6, #1
 1098 0104 EEE7     		b	.L49
 1099              	.L64:
 1100 0106 00BF     		.align	2
 1101              	.L63:
 1102 0108 00000000 		.word	audio_old_sec
 1103 010c 00000000 		.word	audiodev
 1104 0110 00000000 		.word	wav_file_seek
 1105 0114 00000000 		.word	.LANCHOR2
 1106 0118 00000000 		.word	i2s_tx_callback
 1107 011c 00000000 		.word	wav_i2s_dma_tx_callback
 1108 0120 00000000 		.word	.LANCHOR3
 1109 0124 00000000 		.word	audio_read_flag
 1110 0128 00000000 		.word	audio_run
 1111              		.cfi_endproc
 1112              	.LFE136:
 1114              		.section	.rodata.wave_play.str1.1,"aMS",%progbits,1
 1115              	.LC10:
 1116 0000 54696D65 		.ascii	"Time: %2d:%.2d %2d:%.2d \000"
 1116      3A202532 
 1116      643A252E 
 1116      32642025 
 1116      32643A25 
 1117              		.section	.text.wave_play,"ax",%progbits
 1118              		.align	1
 1119              		.global	wave_play
 1120              		.syntax unified
 1121              		.thumb
 1122              		.thumb_func
 1124              	wave_play:
 1125              	.LFB137:
 208:source\audio/wavplay.c **** 
 209:source\audio/wavplay.c **** 
 210:source\audio/wavplay.c **** void wave_play (void)
 211:source\audio/wavplay.c **** {
 1126              		.loc 1 211 1 view -0
 1127              		.cfi_startproc
 1128              		@ args = 0, pretend = 0, frame = 0
 1129              		@ frame_needed = 0, uses_anonymous_args = 0
 212:source\audio/wavplay.c ****       if ((audio_read_flag) && (audio_pause == 0)) {
 1130              		.loc 1 212 7 view .LVU345
 211:source\audio/wavplay.c ****       if ((audio_read_flag) && (audio_pause == 0)) {
 1131              		.loc 1 211 1 is_stmt 0 view .LVU346
 1132 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1133              		.cfi_def_cfa_offset 20
 1134              		.cfi_offset 4, -20
 1135              		.cfi_offset 5, -16
 1136              		.cfi_offset 6, -12
 1137              		.cfi_offset 7, -8
 1138              		.cfi_offset 14, -4
 1139              		.loc 1 212 11 view .LVU347
 1140 0002 3B4E     		ldr	r6, .L93
 1141 0004 3B4C     		ldr	r4, .L93+4
 1142 0006 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 211:source\audio/wavplay.c ****       if ((audio_read_flag) && (audio_pause == 0)) {
 1143              		.loc 1 211 1 view .LVU348
 1144 0008 85B0     		sub	sp, sp, #20
 1145              		.cfi_def_cfa_offset 40
 1146              		.loc 1 212 10 view .LVU349
 1147 000a C3B1     		cbz	r3, .L66
 1148              		.loc 1 212 45 discriminator 1 view .LVU350
 1149 000c 3A4B     		ldr	r3, .L93+8
 1150 000e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1151              		.loc 1 212 29 discriminator 1 view .LVU351
 1152 0010 03F0FF02 		and	r2, r3, #255
 1153 0014 9BB9     		cbnz	r3, .L66
 213:source\audio/wavplay.c ****          if (wavtransferend) {
 1154              		.loc 1 213 10 is_stmt 1 view .LVU352
 1155              		.loc 1 213 14 is_stmt 0 view .LVU353
 1156 0016 394B     		ldr	r3, .L93+12
 1157 0018 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 1158              		.loc 1 213 13 view .LVU354
 1159 001a 81B1     		cbz	r1, .L66
 214:source\audio/wavplay.c **** 	    wavtransferend = 0;
 1160              		.loc 1 214 6 is_stmt 1 view .LVU355
 1161              		.loc 1 214 21 is_stmt 0 view .LVU356
 1162 001c 1A70     		strb	r2, [r3]
 215:source\audio/wavplay.c ****  	    if (wavwitchbuf) fillnum = wav_buffill(audiodev.i2sbuf2,WAV_I2S_TX_DMA_BUFSIZE,wavctrl.bps);e
 1163              		.loc 1 215 7 is_stmt 1 view .LVU357
 1164              		.loc 1 215 11 is_stmt 0 view .LVU358
 1165 001e 384B     		ldr	r3, .L93+16
 1166              		.loc 1 215 93 view .LVU359
 1167 0020 384A     		ldr	r2, .L93+20
 1168              		.loc 1 215 11 view .LVU360
 1169 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1170              		.loc 1 215 93 view .LVU361
 1171 0024 528B     		ldrh	r2, [r2, #26]	@ unaligned
 1172 0026 384D     		ldr	r5, .L93+24
 1173              		.loc 1 215 34 view .LVU362
 1174 0028 D2B2     		uxtb	r2, r2
 1175 002a 4FF47051 		mov	r1, #15360
 1176              		.loc 1 215 10 view .LVU363
 1177 002e 002B     		cmp	r3, #0
 1178 0030 5BD0     		beq	.L67
 1179              		.loc 1 215 24 is_stmt 1 discriminator 1 view .LVU364
 1180              		.loc 1 215 34 is_stmt 0 discriminator 1 view .LVU365
 1181 0032 6068     		ldr	r0, [r4, #4]	@ unaligned
 1182              	.L92:
 1183              		.loc 1 215 114 discriminator 2 view .LVU366
 1184 0034 FFF7FEFF 		bl	wav_buffill
 1185              	.LVL101:
 216:source\audio/wavplay.c ****  	    audio_read_flag = 0;
 1186              		.loc 1 216 23 discriminator 2 view .LVU367
 1187 0038 0023     		movs	r3, #0
 215:source\audio/wavplay.c ****  	    if (wavwitchbuf) fillnum = wav_buffill(audiodev.i2sbuf2,WAV_I2S_TX_DMA_BUFSIZE,wavctrl.bps);e
 1188              		.loc 1 215 112 discriminator 2 view .LVU368
 1189 003a 2860     		str	r0, [r5]
 1190              		.loc 1 216 7 is_stmt 1 discriminator 2 view .LVU369
 1191              		.loc 1 216 23 is_stmt 0 discriminator 2 view .LVU370
 1192 003c 3370     		strb	r3, [r6]
 1193              	.L66:
 217:source\audio/wavplay.c ****  	 }
 218:source\audio/wavplay.c ****       }
 219:source\audio/wavplay.c ****       if ((audiodev.status & (1 << 1)) == 0 || (fillnum != WAV_I2S_TX_DMA_BUFSIZE)) {
 1194              		.loc 1 219 7 is_stmt 1 view .LVU371
 1195              		.loc 1 219 20 is_stmt 0 view .LVU372
 1196 003e 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 1197              		.loc 1 219 10 view .LVU373
 1198 0040 9907     		lsls	r1, r3, #30
 1199 0042 04D5     		bpl	.L69
 1200              		.loc 1 219 57 discriminator 1 view .LVU374
 1201 0044 304B     		ldr	r3, .L93+24
 1202              		.loc 1 219 45 discriminator 1 view .LVU375
 1203 0046 1B68     		ldr	r3, [r3]
 1204 0048 B3F5705F 		cmp	r3, #15360
 1205 004c 04D0     		beq	.L70
 1206              	.L69:
 220:source\audio/wavplay.c ****       	 if (audio_pause == 0) {
 1207              		.loc 1 220 9 is_stmt 1 view .LVU376
 1208              		.loc 1 220 25 is_stmt 0 view .LVU377
 1209 004e 2A4B     		ldr	r3, .L93+8
 1210 0050 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1211              		.loc 1 220 12 view .LVU378
 1212 0052 0BB9     		cbnz	r3, .L70
 221:source\audio/wavplay.c **** 	    wave_stop();
 1213              		.loc 1 221 6 is_stmt 1 view .LVU379
 1214 0054 FFF7FEFF 		bl	wave_stop
 1215              	.LVL102:
 1216              	.L70:
 222:source\audio/wavplay.c **** 	 }
 223:source\audio/wavplay.c ****       }
 224:source\audio/wavplay.c ****       if ((audiodev.status & (1 << 1)) && (audio_read_flag == 0) && (audio_pause == 0)) {
 1217              		.loc 1 224 7 view .LVU380
 1218              		.loc 1 224 20 is_stmt 0 view .LVU381
 1219 0058 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 1220              		.loc 1 224 10 view .LVU382
 1221 005a 9A07     		lsls	r2, r3, #30
 1222 005c 43D5     		bpl	.L65
 1223              		.loc 1 224 60 discriminator 1 view .LVU383
 1224 005e 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 1225              		.loc 1 224 40 discriminator 1 view .LVU384
 1226 0060 002B     		cmp	r3, #0
 1227 0062 40D1     		bne	.L65
 1228              		.loc 1 224 82 discriminator 2 view .LVU385
 1229 0064 244B     		ldr	r3, .L93+8
 1230 0066 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1231              		.loc 1 224 66 discriminator 2 view .LVU386
 1232 0068 03F0FF07 		and	r7, r3, #255
 1233 006c 002B     		cmp	r3, #0
 1234 006e 3AD1     		bne	.L65
 225:source\audio/wavplay.c ****          audio_delay++;
 1235              		.loc 1 225 10 is_stmt 1 view .LVU387
 1236              		.loc 1 225 21 is_stmt 0 view .LVU388
 1237 0070 264A     		ldr	r2, .L93+28
 1238 0072 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1239 0074 0133     		adds	r3, r3, #1
 1240 0076 DBB2     		uxtb	r3, r3
 1241 0078 1370     		strb	r3, [r2]
 226:source\audio/wavplay.c ****          if (audio_delay >= 100) {
 1242              		.loc 1 226 10 is_stmt 1 view .LVU389
 1243              		.loc 1 226 26 is_stmt 0 view .LVU390
 1244 007a 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1245              		.loc 1 226 13 view .LVU391
 1246 007c 632B     		cmp	r3, #99
 1247 007e 2DD9     		bls	.L75
 227:source\audio/wavplay.c ****             audio_delay = 0;
 1248              		.loc 1 227 13 is_stmt 1 view .LVU392
 228:source\audio/wavplay.c **** 	    wav_get_curtime(audiodev.file,&wavctrl);
 1249              		.loc 1 228 6 is_stmt 0 view .LVU393
 1250 0080 204D     		ldr	r5, .L93+20
 227:source\audio/wavplay.c ****             audio_delay = 0;
 1251              		.loc 1 227 25 view .LVU394
 1252 0082 1770     		strb	r7, [r2]
 1253              		.loc 1 228 6 is_stmt 1 view .LVU395
 1254 0084 E068     		ldr	r0, [r4, #12]	@ unaligned
 1255 0086 2946     		mov	r1, r5
 1256 0088 FFF7FEFF 		bl	wav_get_curtime
 1257              	.LVL103:
 229:source\audio/wavplay.c **** 	    audiodev.totsec = wavctrl.totsec;
 1258              		.loc 1 229 6 view .LVU396
 1259              		.loc 1 229 31 is_stmt 0 view .LVU397
 1260 008c D5F80A10 		ldr	r1, [r5, #10]	@ unaligned
 1261              		.loc 1 229 22 view .LVU398
 1262 0090 C4F82210 		str	r1, [r4, #34]	@ unaligned
 230:source\audio/wavplay.c **** 	    audiodev.cursec = wavctrl.cursec;
 1263              		.loc 1 230 6 is_stmt 1 view .LVU399
 1264              		.loc 1 230 31 is_stmt 0 view .LVU400
 1265 0094 D5F80E20 		ldr	r2, [r5, #14]	@ unaligned
 1266              		.loc 1 230 22 view .LVU401
 1267 0098 C4F82620 		str	r2, [r4, #38]	@ unaligned
 231:source\audio/wavplay.c **** 	    audiodev.bitrate = wavctrl.bitrate;
 1268              		.loc 1 231 6 is_stmt 1 view .LVU402
 1269              		.loc 1 231 32 is_stmt 0 view .LVU403
 1270 009c D5F81230 		ldr	r3, [r5, #18]	@ unaligned
 1271              		.loc 1 231 23 view .LVU404
 1272 00a0 C4F82A30 		str	r3, [r4, #42]	@ unaligned
 232:source\audio/wavplay.c **** 	    audiodev.samplerate = wavctrl.samplerate;
 1273              		.loc 1 232 6 is_stmt 1 view .LVU405
 1274              		.loc 1 232 35 is_stmt 0 view .LVU406
 1275 00a4 D5F81630 		ldr	r3, [r5, #22]	@ unaligned
 1276              		.loc 1 232 26 view .LVU407
 1277 00a8 C4F82E30 		str	r3, [r4, #46]	@ unaligned
 233:source\audio/wavplay.c **** 	    audiodev.bps = wavctrl.bps;
 1278              		.loc 1 233 6 is_stmt 1 view .LVU408
 1279              		.loc 1 233 28 is_stmt 0 view .LVU409
 1280 00ac 6B8B     		ldrh	r3, [r5, #26]	@ unaligned
 1281              		.loc 1 233 19 view .LVU410
 1282 00ae 6386     		strh	r3, [r4, #50]	@ unaligned
 234:source\audio/wavplay.c ****             if (wavctrl.cursec != audio_old_sec) {
 1283              		.loc 1 234 13 is_stmt 1 view .LVU411
 1284              		.loc 1 234 32 is_stmt 0 view .LVU412
 1285 00b0 174B     		ldr	r3, .L93+32
 1286              		.loc 1 234 16 view .LVU413
 1287 00b2 1868     		ldr	r0, [r3]
 1288 00b4 8242     		cmp	r2, r0
 1289 00b6 11D0     		beq	.L75
 235:source\audio/wavplay.c ****                audio_old_sec = wavctrl.cursec;
 1290              		.loc 1 235 16 is_stmt 1 view .LVU414
 236:source\audio/wavplay.c ****                lcd_printf(0,28,"Time: %2d:%.2d %2d:%.2d ",wavctrl.totsec / 60,wavctrl.totsec % 60,w
 1291              		.loc 1 236 16 is_stmt 0 view .LVU415
 1292 00b8 3C20     		movs	r0, #60
 235:source\audio/wavplay.c ****                audio_old_sec = wavctrl.cursec;
 1293              		.loc 1 235 30 view .LVU416
 1294 00ba 1A60     		str	r2, [r3]
 1295              		.loc 1 236 16 is_stmt 1 view .LVU417
 1296 00bc B2FBF0F5 		udiv	r5, r2, r0
 1297 00c0 B1FBF0F3 		udiv	r3, r1, r0
 1298 00c4 00FB1522 		mls	r2, r0, r5, r2
 1299 00c8 00FB1311 		mls	r1, r0, r3, r1
 1300 00cc CDE90152 		strd	r5, r2, [sp, #4]
 1301 00d0 0091     		str	r1, [sp]
 1302 00d2 104A     		ldr	r2, .L93+36
 1303 00d4 1C21     		movs	r1, #28
 1304 00d6 3846     		mov	r0, r7
 1305 00d8 FFF7FEFF 		bl	lcd_printf
 1306              	.LVL104:
 1307              	.L75:
 237:source\audio/wavplay.c ****             }
 238:source\audio/wavplay.c ****          }
 239:source\audio/wavplay.c ****          if (audiodev.status & 0x01) audio_read_flag = 1;
 1308              		.loc 1 239 10 view .LVU418
 1309              		.loc 1 239 22 is_stmt 0 view .LVU419
 1310 00dc 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 1311              		.loc 1 239 13 view .LVU420
 1312 00de DB07     		lsls	r3, r3, #31
 1313              		.loc 1 239 38 is_stmt 1 view .LVU421
 1314              		.loc 1 239 54 is_stmt 0 view .LVU422
 1315 00e0 44BF     		itt	mi
 1316 00e2 0123     		movmi	r3, #1
 1317 00e4 3370     		strbmi	r3, [r6]
 1318              	.L65:
 240:source\audio/wavplay.c ****       }
 241:source\audio/wavplay.c **** }
 1319              		.loc 1 241 1 view .LVU423
 1320 00e6 05B0     		add	sp, sp, #20
 1321              		.cfi_remember_state
 1322              		.cfi_def_cfa_offset 20
 1323              		@ sp needed
 1324 00e8 F0BD     		pop	{r4, r5, r6, r7, pc}
 1325              	.L67:
 1326              		.cfi_restore_state
 215:source\audio/wavplay.c ****  	    audio_read_flag = 0;
 1327              		.loc 1 215 104 is_stmt 1 discriminator 2 view .LVU424
 215:source\audio/wavplay.c ****  	    audio_read_flag = 0;
 1328              		.loc 1 215 114 is_stmt 0 discriminator 2 view .LVU425
 1329 00ea 2068     		ldr	r0, [r4]	@ unaligned
 1330 00ec A2E7     		b	.L92
 1331              	.L94:
 1332 00ee 00BF     		.align	2
 1333              	.L93:
 1334 00f0 00000000 		.word	audio_read_flag
 1335 00f4 00000000 		.word	audiodev
 1336 00f8 00000000 		.word	audio_pause
 1337 00fc 00000000 		.word	.LANCHOR1
 1338 0100 00000000 		.word	.LANCHOR0
 1339 0104 00000000 		.word	.LANCHOR2
 1340 0108 00000000 		.word	.LANCHOR3
 1341 010c 00000000 		.word	audio_delay
 1342 0110 00000000 		.word	audio_old_sec
 1343 0114 00000000 		.word	.LC10
 1344              		.cfi_endproc
 1345              	.LFE137:
 1347              		.global	fillnum
 1348              		.global	wavwitchbuf
 1349              		.global	wavtransferend
 1350              		.global	wavctrl
 1351              		.section	.bss.fillnum,"aw",%nobits
 1352              		.align	2
 1353              		.set	.LANCHOR3,. + 0
 1356              	fillnum:
 1357 0000 00000000 		.space	4
 1358              		.section	.bss.wavctrl,"aw",%nobits
 1359              		.set	.LANCHOR2,. + 0
 1362              	wavctrl:
 1363 0000 00000000 		.space	32
 1363      00000000 
 1363      00000000 
 1363      00000000 
 1363      00000000 
 1364              		.section	.bss.wavtransferend,"aw",%nobits
 1365              		.set	.LANCHOR1,. + 0
 1368              	wavtransferend:
 1369 0000 00       		.space	1
 1370              		.section	.bss.wavwitchbuf,"aw",%nobits
 1371              		.set	.LANCHOR0,. + 0
 1374              	wavwitchbuf:
 1375 0000 00       		.space	1
 1376              		.text
 1377              	.Letext0:
 1378              		.file 2 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 1379              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 1380              		.file 4 "/project/stm32f4x_iolib/include/cmsis/stm32f4xx.h"
 1381              		.file 5 "source\\audio\\../fatfs/integer.h"
 1382              		.file 6 "source\\audio\\../fatfs/ff.h"
 1383              		.file 7 "source\\audio\\../prototype.h"
 1384              		.file 8 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
DEFINED SYMBOLS
                            *ABS*:00000000 wavplay.c
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:20     .text.wav_i2s_dma_tx_callback:00000000 $t
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:26     .text.wav_i2s_dma_tx_callback:00000000 wav_i2s_dma_tx_callback
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:113    .text.wav_i2s_dma_tx_callback:0000004c $d
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:121    .text.wav_file_seek:00000000 $t
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:127    .text.wav_file_seek:00000000 wav_file_seek
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:202    .text.wav_file_seek:00000044 $d
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:229    .text.wav_decode_init:00000000 $t
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:235    .text.wav_decode_init:00000000 wav_decode_init
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:513    .text.wav_decode_init:00000150 $d
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:532    .text.wav_buffill:00000000 $t
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:538    .text.wav_buffill:00000000 wav_buffill
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:720    .text.wav_buffill:0000007c $d
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:727    .text.wav_get_curtime:00000000 $t
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:733    .text.wav_get_curtime:00000000 wav_get_curtime
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:784    .text.wave_stop:00000000 $t
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:790    .text.wave_stop:00000000 wave_stop
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:854    .text.wave_stop:00000040 $d
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:865    .text.wav_play_song:00000000 $t
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:871    .text.wav_play_song:00000000 wav_play_song
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:1102   .text.wav_play_song:00000108 $d
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:1118   .text.wave_play:00000000 $t
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:1124   .text.wave_play:00000000 wave_play
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:1334   .text.wave_play:000000f0 $d
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:1356   .bss.fillnum:00000000 fillnum
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:1374   .bss.wavwitchbuf:00000000 wavwitchbuf
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:1368   .bss.wavtransferend:00000000 wavtransferend
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:1362   .bss.wavctrl:00000000 wavctrl
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:1352   .bss.fillnum:00000000 $d
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:1363   .bss.wavctrl:00000000 $d
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:1369   .bss.wavtransferend:00000000 $d
C:\Users\dinot\AppData\Local\Temp\cchnT6eY.s:1375   .bss.wavwitchbuf:00000000 $d

UNDEFINED SYMBOLS
audiodev
f_lseek
malloc
f_open
f_read
lcd_printf
f_close
free
volume
__aeabi_uldivmod
__aeabi_ldivmod
audio_stop
audio_run
audio_read_flag
audio_pause
audio_play_function
audio_stop_function
music_play
WM8978_I2S_Cfg
I2S2_Init
I2S2_SampleRate_Set
I2S2_TX_DMA_Init
audio_start
audio_old_sec
i2s_tx_callback
audio_delay
